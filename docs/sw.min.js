var p=(t,s,e)=>new Promise((n,i)=>{var o=a=>{try{c(e.next(a))}catch(r){i(r)}},l=a=>{try{c(e.throw(a))}catch(r){i(r)}},c=a=>a.done?n(a.value):Promise.resolve(a.value).then(o,l);c((e=e.apply(t,s)).next())});var h="cache-v1",f=["css","html","jpeg","jpg","js","map","png","svg"],d=t=>{self.clients.matchAll().then(s=>{s.forEach(e=>e.postMessage(t))})},m=(t,s)=>p(null,null,function*(){let e=yield fetch(t.clone());if(!e||e.status!==200)return;let n=yield caches.open(h),i=e.clone(),o=!0;if(s){let l=e.clone(),[c,a]=yield Promise.all([l.text(),s.text()]);o=c!==a}o&&(yield n.put(t,i),d({type:"cacheUpdate",url:t.url}))});self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(s=>Promise.all(s.map(e=>{if(e!==h)return caches.delete(e)})))),self.clients.claim()});self.addEventListener("fetch",t=>{let s=new URL(t.request.url),e=f.some(n=>s.pathname.endsWith("."+n))||s.pathname.endsWith("manifest.json");t.respondWith(e?caches.match(t.request).then(n=>(t.waitUntil(m(t.request,n&&n.clone())),n||fetch(t.request))):fetch(t.request))});var u=["./index.html","./app.min.css","./app.min.js","./manifest.json","./sw.min.js"];self.addEventListener("install",t=>{t.waitUntil(caches.open(h).then(s=>s.addAll(u))),self.skipWaiting()});
