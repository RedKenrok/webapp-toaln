{
  "version": 3,
  "sources": ["../node_modules/@doars/staark-common/src/array.js", "../node_modules/@doars/staark-common/src/conditional.js", "../node_modules/@doars/staark-common/src/marker.js", "../node_modules/@doars/staark-common/src/node.js", "../node_modules/@doars/staark-common/src/factory.js", "../node_modules/@doars/staark-common/src/selector.js", "../node_modules/@doars/staark-common/src/fctory.js", "../node_modules/@doars/staark-common/src/match.js", "../node_modules/@doars/staark-common/src/clone.js", "../node_modules/@doars/staark-common/src/compare.js", "../node_modules/@doars/staark-common/src/element.js", "../node_modules/@doars/staark/src/library/proxy.js", "../node_modules/@doars/staark/src/library/mount.js", "../node_modules/@doars/vroagn/src/utilities/clone.js", "../node_modules/@doars/vroagn/src/utilities/delay.js", "../node_modules/@doars/vroagn/src/utilities/type.js", "../node_modules/@doars/vroagn/src/library/request.js", "../src/utilities/clone.js", "../src/utilities/singleton.js", "../src/apis/anthropic.js", "../src/apis/deepseek.js", "../src/apis/google.js", "../src/apis/open-ai.js", "../src/apis/apis.js", "../src/data/locales.js", "../src/data/screens.js", "../src/data/state.js", "../src/data/translations.js", "../src/screens/sections/context-menu.js", "../src/screens/sections/popup-modal.js", "../src/screens/sections/update-banner.js", "../src/utilities/screen.js", "../src/screens/migrate.js", "../src/screens/options.js", "../src/screens/overview.js", "../src/screens/setup.js", "../src/utilities/random.js", "../src/utilities/streak.js", "../src/screens/conversation.js", "../src/screens/clarification.js", "../src/screens/comprehension.js", "../src/screens/reading.js", "../src/screens/story.js", "../src/screens/vocabulary.js", "../src/utilities/identifiers.js", "../src/utilities/context-menu.js", "../src/utilities/manifest.js", "../src/utilities/sw.js", "../src/screens/rewrite.js", "../src/app.js"],
  "sourcesContent": ["/**\n * Ensure the data is an array if it isn't already. Non-truthy values are converted to empty arrays.\n *\n * @template T\n * @param {T|T[]} data Data to \"arrify\".\n * @returns {T[]} An array containing the data.\n */\nexport const arrayify = (\n  data,\n) => arrayifyOrUndefined(data) || []\n\n/**\n * Ensure the data is an array if it isn't already. Non-truthy values are converted to undefined.\n *\n * @template T\n * @param {T|T[]} data Data to arrify.\n * @returns {(T[]|undefined)} An array containing the data or undefined.\n */\nexport const arrayifyOrUndefined = (\n  data,\n) => data ? (\n  Array.isArray(data)\n    ? data\n    : [data]\n) : undefined\n", "import { arrayify } from './array.js'\n\n/**\n * @typedef {import('./node.js').NodeContent} NodeContent\n * @typedef {import('./types.js').ResolveFunction} ResolveFunction\n */\n\n/**\n * Returns the content based on the condition.\n *\n * @param {any} condition The condition to evaluate.\n * @param {NodeContent[] | NodeContent | ResolveFunction} onTruth The content to return if the condition is true.\n * @param {NodeContent[] | NodeContent | ResolveFunction} [onFalse] The content to return if the condition is false.\n * @returns {NodeContent[]} The resulting content as an array.\n */\nexport const conditional = (\n  condition,\n  onTruth,\n  onFalse,\n) => {\n  let result = (\n    condition\n      ? onTruth\n      : onFalse\n  )\n  if (typeof (result) === 'function') {\n    result = result()\n  }\n  return arrayify(result)\n}\n", "/**\n * @type {string} Marker that can be used as a node discriminator.\n */\nexport const marker = 'n'\n", "import { arrayifyOrUndefined } from './array.js'\nimport { marker } from './marker.js'\n\n/**\n * @typedef {import('./memo.js').MemoAbstract} MemoAbstract\n */\n\n/**\n * @typedef {function(Event, Record<string, any>): unknown} NodeAttributeListener Listener for node attribute.\n * @property {function(Event, Record<string, any>): unknown} [f] Function that was written to the DOM tree before being wrapped so it can be compared to.\n */\n\n/**\n * @typedef {Object.<string, boolean | null | number | string | (number | string)[] | NodeAttributeListener | Record<string, boolean | number | string>>} NodeAttributes Attributes of a node.\n */\n\n/**\n * @typedef {string | MemoAbstract | NodeAbstract} NodeContent Content of a node.\n */\n\n/**\n * @typedef {Object} NodeAbstract Node abstract.\n * @property {string} _ Discriminator to differentiate from other objects.\n * @property {NodeAttributes} [a] Attributes of the node.\n * @property {NodeContent[]} [c] Abstracts of children.\n * @property {string} t Node type of the node.\n */\n\n/**\n * Creates a NodeAbstract object.\n *\n * @param {string} type Type of the node.\n * @param {NodeAttributes | NodeContent[] | NodeContent} [attributesOrContents] Attributes of node or contents.\n * @param {NodeContent[] | NodeContent} [contents] Abstracts of children.\n * @returns {NodeAbstract} Node abstract representing the given data.\n */\nexport const node = (\n  type,\n  attributesOrContents,\n  contents,\n) => {\n  if (\n    typeof (attributesOrContents) !== 'object'\n    || attributesOrContents._ === marker\n    || Array.isArray(attributesOrContents)\n  ) {\n    contents = attributesOrContents\n    attributesOrContents = undefined\n  }\n\n  return {\n    _: marker,\n    a: attributesOrContents,\n    c: arrayifyOrUndefined(contents),\n    t: type.toUpperCase(),\n  }\n}\n", "import {\n  node,\n} from './node.js'\n\n/**\n * @typedef {import('./node.js').NodeAbstract} NodeAbstract\n * @typedef {import('./node.js').NodeAttributes} NodeAttributes\n * @typedef {import('./node.js').NodeContent} NodeContent\n */\n\n/**\n * @typedef {Function} Factory Function that generates the a node with the given type.\n * @param {NodeAttributes | NodeContent[] | NodeContent} [attributesOrContents] Attributes of node or contents.\n * @param {NodeContent[] | NodeContent} [contents] Abstracts of children.\n * @returns {NodeAbstract} Node abstract representing the given data.\n */\n\n/**\n * @typedef {Object} FactoryCache Factory cache\n */\n\nexport const factory = new Proxy({}, {\n  /**\n   * @param {FactoryCache} target Factory cache.\n   * @param {string} type Type of the nodes to generate.\n   * @returns {Factory} Function that generates the a node with the given type.\n   */\n  get: (\n    target,\n    type,\n  ) => {\n    if (target[type]) {\n      return target[type]\n    }\n\n    const typeConverted = (\n      type[0] + type.substring(1)\n        .replace(\n          /([A-Z])/g,\n          capital => '-' + capital,\n        )\n    ).toUpperCase()\n\n    return target[type] = (\n      attributesOrContents,\n      contents,\n    ) => node(\n      typeConverted,\n      attributesOrContents,\n      contents,\n    )\n  },\n})\n", "const BRACKET_CLOSE = ']'\nconst BRACKET_OPEN = '['\nconst DOT = '.'\nconst EQUAL = '='\nconst HASH = '#'\nconst QUOTE_SINGLE = '\\''\nconst QUOTE_DOUBLE = '\"'\n\n/**\n * @enum {number} TokenTypes.\n */\nconst TokenTypes = {\n  attribute: 0,\n  class: 1,\n  id: 2,\n  type: 3,\n}\n\n/**\n * @typedef {Object.<string, any>} Attributes Attributes.\n */\n\n/**\n * Tokenize a selector into a type and its attributes.\n *\n * @param {string} selector Selector to tokenize.\n * @returns {[string, Attributes]} Node type and attributes.\n */\nexport const selectorToTokenizer = (\n  selector,\n) => {\n  const length = selector.length\n  let i = 0\n\n  let type = ''\n  /** @type {Attributes} */\n  const attributes = {}\n\n  let tokenA = ''\n  let tokenB = true\n  let tokenType = TokenTypes.type\n  const storeToken = () => {\n    if (tokenA) {\n      switch (tokenType) {\n        case TokenTypes.attribute:\n          attributes[tokenA] = (\n            tokenB === true\n              ? true\n              : tokenB\n          )\n          tokenB = true\n          break\n\n        case TokenTypes.class:\n          if (!attributes.class) {\n            attributes.class = tokenA\n            break\n          }\n          attributes.class += ' ' + tokenA\n          break\n\n        case TokenTypes.id:\n          attributes.id = tokenA\n          break\n\n        case TokenTypes.type:\n          type = tokenA\n          break\n      }\n      tokenA = ''\n    }\n  }\n\n  let character\n\n  let attributeBracketCount\n  const parseAttribute = () => {\n    attributeBracketCount = 0\n\n    while (i < length) {\n      character = selector[i]\n      i++\n      if (character === EQUAL) {\n        // Parse attribute value.\n        tokenB = ''\n        character = selector[i]\n        const endOnDoubleQuote = character === QUOTE_DOUBLE\n        const endOnSingleQuote = character === QUOTE_SINGLE\n        if (\n          endOnDoubleQuote\n          || endOnSingleQuote\n        ) {\n          tokenB += character\n          i++\n        }\n\n        while (i < length) {\n          character = selector[i]\n          if (\n            (\n              endOnDoubleQuote\n              && character === QUOTE_DOUBLE\n            )\n            || (\n              endOnSingleQuote\n              && character === QUOTE_SINGLE\n            )\n          ) {\n            tokenB += character\n            i++\n            break\n          } else if (\n            !endOnDoubleQuote\n            && !endOnSingleQuote\n            && character === BRACKET_CLOSE\n          ) {\n            break\n          }\n          tokenB += character\n          i++\n        }\n\n        if (\n          (\n            tokenB[0] === QUOTE_DOUBLE\n            && tokenB[tokenB.length - 1] === QUOTE_DOUBLE\n          ) ||\n          (\n            tokenB[0] === QUOTE_SINGLE\n            && tokenB[tokenB.length - 1] === QUOTE_SINGLE\n          )\n        ) {\n          tokenB = tokenB.substring(1, tokenB.length - 1)\n        }\n\n        // Consume until closing bracket, but don't store the tokens since these are invalid.\n        while (i < length) {\n          character = selector[i]\n          i++\n          if (character === BRACKET_CLOSE) {\n            break\n          }\n        }\n        break\n      } else if (character === BRACKET_OPEN) {\n        attributeBracketCount++\n        continue\n      } else if (character === BRACKET_CLOSE) {\n        attributeBracketCount--\n        if (attributeBracketCount < 0) {\n          break\n        }\n        continue\n      }\n\n      tokenA += character\n    }\n    storeToken()\n  }\n\n  while (i < length) {\n    character = selector[i]\n    i++\n\n    if (character === HASH) {\n      storeToken()\n      tokenType = TokenTypes.id\n      continue\n    } else if (character === DOT) {\n      storeToken()\n      tokenType = TokenTypes.class\n      continue\n    } else if (character === BRACKET_OPEN) {\n      storeToken()\n      tokenType = TokenTypes.attribute\n      parseAttribute()\n      continue\n    }\n\n    tokenA += character\n  }\n\n  return [type, attributes]\n}\n", "import {\n  node,\n} from './node.js'\nimport {\n  selectorToTokenizer,\n} from './selector.js'\n\n/**\n * @typedef {import('./node.js').NodeAbstract} NodeAbstract\n * @typedef {import('./node.js').NodeAttributes} NodeAttributes\n * @typedef {import('./node.js').NodeContent} NodeContent\n */\n\n/**\n * @typedef {function(string=, NodeContent[]|NodeContent=): NodeAbstract} Fctory Function that generates the a node with the given type.\n */\n\n/**\n * @typedef {Object<string, Fctory>} FctoryCache Factory cache.\n */\n\nexport const fctory = new Proxy({}, {\n  /**\n   * @param {FctoryCache} target Factory cache.\n   * @param {string} type Type of the nodes to generate.\n   * @returns {Fctory} Function that generates the a node with the given type.\n   */\n  get: (target, type) => {\n    if (target[type]) {\n      return target[type]\n    }\n\n    const typeConverted = (\n      type[0] + type.substring(1)\n        .replace(\n          /([A-Z])/g,\n          capital => '-' + capital,\n        )\n    ).toUpperCase()\n\n    return target[type] = (\n      selector,\n      contents,\n    ) => {\n      let attributes\n      if (selector) {\n        const [_, _attributes] = selectorToTokenizer(selector)\n        attributes = _attributes\n      }\n      return node(\n        typeConverted,\n        attributes,\n        contents,\n      )\n    }\n  },\n})\n", "import { arrayify } from './array.js'\n\n/**\n * @typedef {import('./node.js').NodeContent} NodeContent\n * @typedef {import('./types.js').ResolveFunction} ResolveFunction\n */\n\n/**\n * Matches a key to a value in a lookup table, with a fallback option.\n *\n * @param {any} key The key to match.\n * @param {Record<any, NodeContent[] | NodeContent | ResolveFunction | null | undefined>} lookup The lookup table.\n * @param {NodeContent[] | NodeContent | ResolveFunction | null} [fallback] The fallback value.\n * @returns {NodeContent[]} The matched or fallback value, arrayified.\n */\nexport const match = (\n  key,\n  lookup,\n  fallback,\n) => {\n  let result\n  if (\n    lookup\n    && (key in lookup)\n    && lookup[key]\n  ) {\n    result = lookup[key]\n  } else {\n    result = fallback\n  }\n  if (typeof result === 'function') {\n    result = result()\n  }\n  return arrayify(result)\n}\n", "/**\n * Creates a deep clone of a JavaScript value.\n *\n * @param {any} value Data to clone.\n * @returns {any} Clone of the data.\n */\nexport const cloneRecursive = (\n  value,\n) => {\n  if (typeof (value) === 'object') {\n    const clone = (\n      Array.isArray(value)\n        ? []\n        : {}\n    )\n    for (const key in value) {\n      clone[key] = cloneRecursive(value[key])\n    }\n    return clone\n  }\n  return value\n}\n", "/**\n * Recursively checks if two values are equal.\n *\n * @param {*} valueA The first value to compare.\n * @param {*} valueB The second value to compare.\n * @returns {boolean} Returns true if the values are equal, otherwise false.\n */\nexport const equalRecursive = (\n  valueA,\n  valueB,\n) => {\n  if (valueA === valueB) {\n    return true\n  }\n\n  if (\n    !valueA\n    || !valueB\n    || typeof valueA !== 'object'\n    || typeof valueB !== 'object'\n  ) {\n    return valueA === valueB\n  }\n\n  if (valueA instanceof Date) {\n    return (\n      valueB instanceof Date\n      && valueA.getTime() === valueB.getTime()\n    )\n  }\n\n  // if (valueA.prototype !== valueB.prototype) {\n  //   return false\n  // }\n\n  const keys = Object.keys(valueA)\n  return (\n    keys.length === Object.keys(valueB).length\n    && keys.every(k => equalRecursive(valueA[k], valueB[k]))\n  )\n}\n", "import {\n  node,\n} from './node.js'\n\n/**\n * @typedef {import('./node.js').NodeContent} NodeContent\n */\n\n/**\n * @typedef {Object} Attribute An attribute of an element.\n * @property {string} name The name of the attribute.\n * @property {string} value The value of the attribute.\n */\n\n/**\n * Converts child nodes of an element to an array of abstract nodes.\n * @param {Element | ChildNode} element The element to convert.\n * @returns {NodeContent[]} The abstract nodes that are equivalent to the given element's child nodes.\n */\nexport const childrenToNodes = (\n  element,\n) => {\n  const abstractChildNodes = []\n  for (const childNode of element.childNodes) {\n    if (childNode instanceof Text) {\n      abstractChildNodes.push(\n        childNode.textContent ?? '',\n      )\n    } else {\n      const attributes = {}\n      for (const attribute of childNode.attributes) {\n        attributes[attribute.name] = attribute.value\n      }\n\n      abstractChildNodes.push(\n        node(\n          childNode.nodeName,\n          attributes,\n          childrenToNodes(childNode),\n        ),\n      )\n    }\n  }\n  return abstractChildNodes\n}\n", "/**\n * Creates a proxy for the given root object to track changes and invoke the onChange callback.\n *\n * @param {Record<string, any>} root - The root object to be proxified.\n * @param {() => void} onChange - The callback function to be invoked on changes.\n * @returns {Record<string, any>} - The proxified root object.\n */\nexport const proxify = (\n  root,\n  onChange,\n) => {\n  const handler = {\n    /**\n     * Deletes a property from the target object and invokes the onChange callback if the property existed.\n     *\n     * @param {Record<string, any>} target - The target object from which the property will be deleted.\n     * @param {string} key - The key of the property to be deleted.\n     * @returns {boolean} - True if the property was deleted, otherwise false.\n     */\n    deleteProperty: (\n      target,\n      key,\n    ) => {\n      if (Reflect.has(target, key)) {\n        const deleted = Reflect.deleteProperty(target, key)\n\n        if (deleted) {\n          onChange()\n        }\n\n        return deleted\n      }\n      return true\n    },\n\n    /**\n     * Sets a property on the target object and invokes the onChange callback if the value has changed.\n     *\n     * @param {Record<string, any>} target - The target object on which the property will be set.\n     * @param {string} key - The key of the property to be set.\n     * @param {any} value - The value to be set.\n     * @returns {boolean} - True if the property was set, otherwise false.\n     */\n    set: (\n      target,\n      key,\n      value,\n    ) => {\n      const existingValue = target[key]\n      if (existingValue !== value) {\n        // Add proxy if value is an object.\n        if (\n          value\n          && typeof value === 'object'\n        ) {\n          value = add(value)\n        }\n        target[key] = value\n\n        // Dispatch set event. If the target is an array and a new item has been pushed then the length has also changed, therefore a more generalizable path will be dispatched.\n        onChange()\n      }\n      return true\n    },\n  }\n\n  /**\n   * Recursively creates proxies for each property of the target object to track changes.\n   *\n   * @param {Record<string, any>} target - The object to be proxified.\n   * @returns {Record<string, any>} - The proxified object.\n   */\n  const add = (\n    target,\n  ) => {\n    // Recursively create proxies for each property.\n    for (const key in target) {\n      if (\n        target[key]\n        && typeof target[key] === 'object'\n      ) {\n        target[key] = add(target[key])\n      }\n    }\n\n    return new Proxy(target, handler)\n  }\n\n  return add(root)\n}\n", "import {\n  arrayifyOrUndefined,\n} from '@doars/staark-common/src/array.js'\nimport {\n  cloneRecursive\n} from '@doars/staark-common/src/clone.js'\nimport {\n  equalRecursive,\n} from '@doars/staark-common/src/compare.js'\nimport {\n  childrenToNodes,\n} from '@doars/staark-common/src/element.js'\nimport {\n  proxify,\n} from './proxy.js'\n\n/**\n * @typedef {import('@doars/staark-common/src/node.js').NodeContent} NodeContent\n * @typedef {import('@doars/staark-common/src/node.js').NodeAttributes} NodeAttributes\n * @typedef {import('@doars/staark-common/src/node.js').NodeAttributeListener} NodeAttributeListener\n * @typedef {import('@doars/staark-common/src/memo.js').MemoFunction} MemoFunction\n * @typedef {import('@doars/staark-common/src/memo.js').MemoAbstract} MemoAbstract\n * @typedef {import('@doars/staark-common/src/node.js').NodeAbstract} NodeAbstract\n */\n\n/**\n * @typedef {Object} MemoData\n * @property {NodeContent[]} c Remembered abstract tree after rendering.\n * @property {any} m Remembered data to compare with.\n * @property {MemoFunction} r Render function to generated abstract tree.\n */\n\n/**\n * @param {HTMLElement | Element | string} rootElement Root element to mount the view on.\n * @param {function(Object<string, any>): (NodeContent[] | NodeContent)} renderView Function to render the view using the state.\n * @param {Object<string, any> | string} [initialState]  Initial state to use.\n * @param {NodeContent[] | string | null} [oldAbstractTree] Old abstract tree to compare with.\n * @returns {undefined | [function(string[]): void, function(): unknown, Object<string, any>]} Returns a trigger function to update the view, a function to unmount the view and the state object.\n */\nexport const mount = (\n  rootElement,\n  renderView,\n  initialState,\n  oldAbstractTree,\n) => {\n  if (typeof (initialState) === 'string') {\n    initialState = JSON.parse(initialState)\n  }\n  if (!initialState) {\n    initialState = {}\n  }\n  let updatePromise = null\n  const triggerUpdate = () => {\n    if (!updatePromise) {\n      updatePromise = Promise.resolve()\n        .then(updateAbstracts)\n    }\n    return updatePromise\n  }\n  let state = (\n    Object.getPrototypeOf(initialState) === Proxy.prototype\n      ? initialState\n      : proxify(\n        initialState,\n        triggerUpdate,\n      )\n  )\n\n  /**\n   * @param {Element} element Element to update.\n   * @param {NodeAttributes} newAttributes New attributes to set.\n   * @param {NodeAttributes} [oldAttributes] Old attributes to compare with.\n   */\n  const updateAttributes = (\n    element,\n    newAttributes,\n    oldAttributes,\n  ) => {\n    if (newAttributes) {\n      for (const name in newAttributes) {\n        let value = newAttributes[name]\n        if (value) {\n          const type = typeof (value)\n          if (type === 'function') {\n            const oldValue = oldAttributes?.[name]\n            if (oldValue?.f !== value) {\n              if (oldValue) {\n                element.removeEventListener(\n                  name,\n                  oldValue,\n                )\n              }\n\n              const listener = newAttributes[name] = (\n                (event) => {\n                  value(event, state)\n                }\n              )\n              listener.f = value\n\n              element.addEventListener(\n                name,\n                listener,\n              )\n            }\n          } else {\n            if (name === 'class') {\n              if (typeof (value) === 'object') {\n                if (Array.isArray(value)) {\n                  value = value.join(' ')\n                } else {\n                  let classNames = ''\n                  for (const className in value) {\n                    if (value[className]) {\n                      classNames += ' ' + className\n                    }\n                  }\n                  value = classNames\n                }\n              }\n              element.className = value\n            } else if (\n              name === 'style'\n              && typeof (value) === 'object'\n            ) {\n              for (let styleName in value) {\n                let styleValue = value[styleName]\n                if (styleName.includes('-', 1)) {\n                  element.style.setProperty(\n                    styleName,\n                    styleValue,\n                  )\n                } else {\n                  element.style[styleName] = styleValue\n                }\n              }\n\n              if (\n                oldAttributes\n                && oldAttributes[name]\n                && typeof (oldAttributes[name]) === 'object'\n                && !Array.isArray(oldAttributes[name])\n              ) {\n                for (let styleName in oldAttributes[name]) {\n                  if (!value[styleName]) {\n                    if (styleName.includes('-', 1)) {\n                      element.style.removeProperty(\n                        styleName,\n                      )\n                    } else {\n                      element.style[styleName] = null\n                    }\n                  }\n                }\n              }\n            } else {\n              if (value === true) {\n                value = 'true'\n              } else if (type !== 'string') {\n                value = value.toString()\n              }\n\n              element.setAttribute(name, value)\n            }\n          }\n        }\n      }\n    }\n\n    if (oldAttributes) {\n      for (const name in oldAttributes) {\n        const value = oldAttributes[name]\n        if (\n          !newAttributes\n          || !newAttributes[name]\n        ) {\n          if (typeof (value) === 'function') {\n            element.removeEventListener(\n              name,\n              oldAttributes[name],\n            )\n          } else if (name === 'class') {\n            element.className = ''\n          } else if (name === 'style') {\n            element.style.cssText = ''\n          } else if (name === 'value') {\n            element.value = ''\n          } else {\n            element.removeAttribute(name)\n          }\n        }\n      }\n    }\n  }\n\n  let oldMemoMap = new WeakMap()\n  let newMemoMap = new WeakMap()\n\n  /**\n   * @param {Element} element Element to update.\n   * @param {NodeContent[]} [newChildAbstracts] New children to set.\n   * @param {NodeContent[]} [oldChildAbstracts] Old children to compare with.\n   */\n  const updateChildren = (\n    element,\n    newChildAbstracts,\n    oldChildAbstracts,\n  ) => {\n    let newIndex = 0\n    let newCount = 0\n    if (newChildAbstracts) {\n      for (; newIndex < newChildAbstracts.length; newIndex++) {\n        const newAbstract = newChildAbstracts[newIndex]\n\n        if (newAbstract.r) {\n          let match = oldMemoMap.get(\n            newAbstract.r,\n          )\n          if (\n            !match\n            || !equalRecursive(match.m, newAbstract.m)\n          ) {\n            match = {\n              c: arrayifyOrUndefined(\n                newAbstract.r(\n                  state,\n                  newAbstract.m,\n                )\n              ),\n              m: newAbstract.m,\n              r: newAbstract.r,\n            }\n          }\n\n          newMemoMap.set(newAbstract.r, match)\n\n          // Splice nodes into the tree and re-run the loop again.\n          newChildAbstracts.splice(\n            newIndex,\n            1,\n            // NOTE: Is a recursive clone required here? Yes as long as the old abstract tree is mutated.\n            ...cloneRecursive(\n              match.c,\n            ),\n          )\n          // NOTE: Preferably we would skip re-rendering when the nodes were memoized, but because those nodes might have morphed we'll have to check. So we re-process the node again that was just inserted in. We could have the resolve memoization return whether it was re-rendered, but this also means the nodes are not allowed to be re-used when morphing the DOM and this needs to be prevented by marking them as such.\n          newIndex--\n          continue\n        }\n\n        let matched = false\n        if (oldChildAbstracts) {\n          for (let oldIndex = newIndex - newCount; oldIndex < oldChildAbstracts.length; oldIndex++) {\n            const oldAbstract = oldChildAbstracts[oldIndex]\n            if (\n              (\n                oldAbstract.t\n                && newAbstract.t === oldAbstract.t\n              )\n              || (\n                !oldAbstract.t\n                && !newAbstract.t\n              )\n            ) {\n              matched = true\n\n              if (newIndex !== (oldIndex + newCount)) {\n                element.insertBefore(\n                  element.childNodes[oldIndex + newCount],\n                  element.childNodes[newIndex],\n                )\n                oldChildAbstracts.splice(\n                  newIndex - newCount,\n                  0,\n                  oldChildAbstracts.splice(\n                    oldIndex,\n                    1,\n                  )[0]\n                )\n              }\n\n              if (newAbstract.t) {\n                updateAttributes(\n                  element.childNodes[newIndex],\n                  newAbstract.a,\n                  oldAbstract.a,\n                )\n                updateChildren(\n                  element.childNodes[newIndex],\n                  newAbstract.c,\n                  oldAbstract.c,\n                )\n              } else if (oldAbstract !== newAbstract) {\n                element.childNodes[newIndex].textContent = newAbstract\n              }\n              break\n            }\n          }\n        }\n\n        if (!matched) {\n          let newNode\n          if (newAbstract.t) {\n            newNode = document.createElement(\n              newAbstract.t,\n            )\n            updateAttributes(\n              newNode,\n              newAbstract.a,\n            )\n            updateChildren(\n              newNode,\n              newAbstract.c,\n            )\n          } else {\n            newNode = document.createTextNode(\n              newAbstract,\n            )\n          }\n\n          element.insertBefore(\n            newNode,\n            element.childNodes[newIndex],\n          )\n          newCount++\n        }\n      }\n    }\n\n    if (oldChildAbstracts) {\n      const elementLength = oldChildAbstracts.length + newCount\n      if (elementLength >= newIndex) {\n        for (let i = elementLength - 1; i >= newIndex; i--) {\n          element.childNodes[i].remove()\n        }\n      }\n    }\n  }\n\n  const _rootElement = (\n    typeof (rootElement) === 'string'\n      ? (\n        document.querySelector(rootElement)\n        || document.body.appendChild(\n          document.createElement('div')\n        )\n      )\n      : rootElement\n  )\n\n  if (typeof (oldAbstractTree) === 'string') {\n    try {\n      oldAbstractTree = JSON.parse(oldAbstractTree)\n    } catch (error) {\n      oldAbstractTree = null\n    }\n  }\n  if (!oldAbstractTree) {\n    oldAbstractTree = childrenToNodes(_rootElement)\n  }\n\n  let active = true,\n    updating = false\n  const updateAbstracts = () => {\n    if (\n      active\n      && !updating\n      && updatePromise\n    ) {\n      updating = true\n      updatePromise = null\n\n      let newAbstractTree = arrayifyOrUndefined(\n        renderView(state),\n      )\n      updateChildren(\n        _rootElement,\n        newAbstractTree,\n        oldAbstractTree,\n      )\n      oldAbstractTree = newAbstractTree\n      oldMemoMap = newMemoMap\n      newMemoMap = new WeakMap()\n\n      updating = false\n    }\n  }\n  triggerUpdate()\n  updateAbstracts()\n\n  return [\n    triggerUpdate,\n    () => {\n      if (active) {\n        active = false\n\n        for (let i = _rootElement.childNodes.length - 1; i >= 0; i--) {\n          _rootElement.childNodes[i].remove()\n        }\n      }\n    },\n    state,\n  ]\n}\n", "/**\n * Creates a deep clone of a javascript value.\n *\n * @param {any} value Data to clone.\n * @returns {any} Clone of the data.\n */\nexport const cloneRecursive = (\n  value,\n) => {\n  if (typeof (value) === 'object') {\n    const clone = (\n      Array.isArray(value)\n        ? []\n        : {}\n    )\n    for (const key in value) {\n      clone[key] = cloneRecursive(value[key])\n    }\n    return clone\n  }\n  return value\n}\n", "/**\n * Delays the execution for a specified amount of time.\n *\n * @param {number} time The amount of time to delay in milliseconds.\n * @returns {Promise<null>} A promise that resolves after the delay.\n */\nexport const delay = async (\n  time,\n) => {\n  if (time > 0) {\n    return new Promise(\n      (resolve) => setTimeout(resolve, time),\n    )\n  }\n  return null\n}\n", "/**\n * Normalize the content type by removing any parameters and converting to lowercase.\n *\n * @param {string} contentType The content type to normalize.\n * @returns {string} The normalized content type.\n */\nconst normalizeContentType = (contentType) => contentType.split(';')[0].trim().toLowerCase()\n\n/**\n * Extract the file extension from a URL.\n *\n * @param {string} url The URL to extract the file extension from.\n * @returns {string|null} The file extension or null if not found.\n */\nconst getFileExtension = (\n  url,\n) => {\n  const match = url.match(/\\.([^./?]+)(?:[?#]|$)/)\n  return match ? match[1].toLowerCase() : null\n}\n\n/**\n * Get the type of the resource based on the URL, response headers, and request headers.\n *\n * @param {string} url The URL of the resource.\n * @param {Headers} responseHeaders The response headers.\n * @param {Record<string, string>} [requestHeaders] The request headers.\n * @returns {string} The type of the resource.\n */\nexport const getType = (\n  url,\n  responseHeaders,\n  requestHeaders,\n) => {\n  // Check Content-Type in response headers.\n  const contentType = responseHeaders.get('Content-Type')\n  if (contentType) {\n    return normalizeContentType(contentType)\n  }\n\n  // Check Accept in request headers.\n  if (requestHeaders) {\n    if (requestHeaders['Accept']) {\n      const acceptTypes = requestHeaders['Accept'].split(',')\n      for (const type of acceptTypes) {\n        if (type.trim() !== '*/*') {\n          return normalizeContentType(type)\n        }\n      }\n    }\n  }\n\n  // Check URL extension.\n  const extension = getFileExtension(url)\n  if (extension) {\n    return extension\n  }\n\n  return ''\n}\n", "import { cloneRecursive } from '../utilities/clone.js'\nimport { delay } from '../utilities/delay.js'\nimport { getType } from '../utilities/type.js'\n\n/**\n * @typedef {Object} ResponseParser Defines a response parser.\n * @property {string[]} types The types of responses the parser can handle.\n * @property {(response: Response, options: RequestOptions, type: string) => any} parser The function to parse the response.\n **/\n\n/**\n * @typedef {Object} SendOptions Defines the options for sending a request.\n * @property {any} [body] The body of the request.\n * @property {RequestCredentials} [credentials] The credentials for the request.\n * @property {string} [domain] The domain for the request.\n * @property {Record<string, string>} [headers] The headers for the request.\n * @property {'get' | 'post' | 'put' | 'delete' | 'patch' | 'head'} [method] The HTTP method for the request.\n * @property {RequestMode} [mode] The mode for the request.\n * @property {string} [path] The path for the request.\n * @property {'high' | 'normal' | 'low'} [priority] The priority of the request.\n * @property {Record<string, string>} [queryParams] The query parameters for the request.\n * @property {RequestRedirect} [redirect] The redirect mode for the request.\n * @property {ResponseParser[]} [parsers] The parsers for the response.\n * @property {string} [type] The expected response type.\n * @property {AbortController} [abort] The abort controller for the request.\n * @property {RequestCache} [cache] The cache mode for the request.\n * @property {(request: Request | string, requestOptions?: RequestInit) => Promise<Response>} [fetch] The fetch function to use for the request.\n * @property {number} [debounce] The debounce time for the request.\n * @property {number} [delay] The delay time for the request.\n * @property {number} [throttle] The throttle time for the request.\n * @property {number} [timeout] The timeout for the request.\n * @property {number} [retryAttempts] The number of retry attempts for the request.\n * @property {number[]} [retryCodes] The HTTP status codes that should trigger a retry.\n * @property {number} [retryDelay] The delay between retry attempts.\n **/\n\n/**\n * @typedef {SendOptions & { maxConcurrency?: number, maxRequests?: number }} RequestOptions Defines the options for creating a request handler.\n */\n\n// Default values for the request handler.\nconst DEFAULT_VALUES = {\n  method: 'get',\n  retryCodes: [429, 503, 504],\n  retryDelay: 500,\n}\n\n/**\n * Creates a request handler.\n *\n * @param {RequestOptions} initialOptions The initial options for the request handler.\n * @returns {(sendOptions: SendOptions) => Promise<[Error | null, Response | null, any]>} The request handler.\n */\nexport const create = (\n  initialOptions,\n) => {\n  initialOptions = {\n    ...DEFAULT_VALUES,\n    ...cloneRecursive(initialOptions),\n  }\n\n  let lastExecutionTime = 0\n  let activeRequests = 0\n  let totalRequests = 0\n  let debounceTimeout = null\n\n  /**\n   * @param {number} throttleValue\n   */\n  const throttle = async (\n    throttleValue,\n  ) => {\n    const now = Date.now()\n    const waitTime = throttleValue - (now - lastExecutionTime)\n    lastExecutionTime = now + (waitTime > 0 ? waitTime : 0)\n    await delay(waitTime)\n  }\n\n  /**\n   * Debounces the request handler.\n   *\n   * @param {number} debounceValue The debounce time in milliseconds.\n   * @returns {Promise<void>} A promise that resolves after the debounce time.\n   */\n  const debounce = (\n    debounceValue,\n  ) => {\n    return new Promise((resolve) => {\n      if (debounceTimeout) {\n        clearTimeout(debounceTimeout)\n      }\n      debounceTimeout = setTimeout(resolve, debounceValue)\n    })\n  }\n\n  /**\n   * Sends a request.\n   *\n   * @param {RequestOptions} options The options for the request.\n   * @returns {Promise<[Error | null, Response | null, any]>} The error, response and result of the request.\n   */\n  const sendRequest = async (\n    options,\n  ) => {\n    if (\n      options.maxRequests !== undefined\n      && totalRequests >= options.maxRequests\n    ) {\n      return [new Error('Maximum request limit reached'), null, null]\n    }\n\n    totalRequests++\n\n    const config = {\n      cache: options.cache,\n      credentials: options.credentials,\n      headers: options.headers,\n      method: options.method,\n      mode: options.mode,\n      redirect: options.redirect,\n      body: options.body ? JSON.stringify(options.body) : undefined,\n    }\n\n    let url = (options.domain || '') + (options.path || '')\n    if (options.queryParams) {\n      url += '?' + new URLSearchParams(options.queryParams).toString()\n    }\n\n    if (options.timeout) {\n      const controller = options.abort || new AbortController()\n      config.signal = controller.signal\n      setTimeout(() => controller.abort(), options.timeout)\n    }\n\n    /**\n     * @returns {Promise<[Error | null, Response, any]>}\n     */\n    const executeFetch = async () => {\n      const response = await (options.fetch ?? fetch)(url, config)\n      if (!response.ok) {\n        return [new Error('Invalid response'), response, null]\n      }\n\n      try {\n        let result\n        let foundParser = false\n        const type = options.type || getType(url, response.headers, options.headers)\n        if (options.parsers) {\n          for (const parser of options.parsers) {\n            foundParser = parser.types.includes(type)\n            if (foundParser) {\n              result = await parser.parser(response, options, type)\n              break\n            }\n          }\n        }\n        if (!foundParser) {\n          switch (type.toLowerCase()) {\n            case 'arraybuffer':\n              result = await response.arrayBuffer()\n              break\n            case 'blob':\n              result = await response.blob()\n              break\n            case 'formdata':\n              result = await response.formData()\n              break\n            case 'text/plain':\n            case 'text':\n            case 'txt':\n              result = await response.text()\n              break\n            case 'text/html-partial':\n            case 'html-partial':\n              result = await response.text()\n              const template = document.createElement('template')\n              template.innerHTML = result\n              result = template.content.childNodes\n              break\n            case 'text/html':\n            case 'html':\n              result = await response.text()\n              result = new DOMParser().parseFromString(result, 'text/html')\n              break\n            case 'application/json':\n            case 'text/json':\n            case 'json':\n              result = await response.json()\n              break\n            case 'image/svg+xml':\n            case 'svg':\n              result = await response.text()\n              result = new DOMParser().parseFromString(result, 'image/svg+xml')\n              break\n            case 'application/xml':\n            case 'text/xml':\n            case 'xml':\n              result = await response.text()\n              result = new DOMParser().parseFromString(result, 'application/xml')\n              break\n          }\n        }\n\n        return [null, response, result]\n      } catch (error) {\n        return [error || new Error('Thrown parsing error is falsy'), response, null]\n      }\n    }\n\n    /**\n     * Retries the request.\n     *\n     * @returns {Promise<[Error | null, Response, any]>} The error, response and result of the request.\n     */\n    const retryRequest = async () => {\n      let attempt = 0\n      const retryAttempts = options.retryAttempts || 0\n      const retryDelay = options.retryDelay || 0\n\n      while (attempt < retryAttempts) {\n        const [error, response, result] = await executeFetch()\n        if (!error) {\n          return [error, response, result]\n        }\n        if (!options.retryCodes?.includes(response.status || 200)) {\n          return [new Error('Invalid status code'), response, result]\n        }\n\n        attempt++\n        if (attempt >= retryAttempts) {\n          return [new Error('Too many retry attempts'), response, result]\n        }\n\n        let delayTime = retryDelay * Math.pow(2, attempt - 1)\n\n        const retryAfter = response.headers.get('Retry-After')\n        if (retryAfter) {\n          const retryAfterSeconds = parseInt(retryAfter, 10)\n          if (!isNaN(retryAfterSeconds)) {\n            delayTime = Math.max(delayTime, retryAfterSeconds * 1000)\n          } else {\n            const retryAfterDate = new Date(retryAfter).getTime()\n            if (!isNaN(retryAfterDate)) {\n              const currentTime = Date.now()\n              delayTime = Math.max(delayTime, retryAfterDate - currentTime)\n            }\n          }\n        }\n\n        await delay(delayTime)\n      }\n      return executeFetch()\n    }\n\n    const [error, response, result] = await retryRequest()\n    if (!response.ok) {\n      return [new Error(response.statusText), response, result]\n    }\n    return [error, response, result]\n  }\n\n  /**\n   * Sends a request.\n   *\n   * @param {SendOptions} sendOptions The options for sending the request.\n   * @returns {Promise<[Error | null, Response | null, any]>} The error, response and result of the request.\n   */\n  return async (\n    sendOptions,\n  ) => {\n    const options = {\n      ...initialOptions,\n      ...cloneRecursive(sendOptions),\n    }\n    if (initialOptions.headers) {\n      options.headers = {\n        ...initialOptions.headers,\n        ...options.headers,\n      }\n    }\n\n    if (options.debounce) {\n      await debounce(options.debounce)\n    }\n\n    if (options.delay) {\n      await delay(options.delay)\n    }\n\n    if (options.throttle) {\n      await throttle(options.throttle)\n    }\n\n    if (\n      options.maxConcurrency\n      && activeRequests >= options.maxConcurrency\n    ) {\n      await new Promise(resolve => {\n        let interval = null\n        const wait = () => {\n          if (activeRequests >= options.maxConcurrency) {\n            interval = requestAnimationFrame(wait)\n          } else {\n            if (interval) {\n              clearInterval(interval)\n            }\n            resolve(null)\n          }\n        }\n        interval = requestAnimationFrame(wait)\n      })\n    }\n\n    activeRequests++\n    const results = await sendRequest(options)\n    activeRequests--\n    return results\n  }\n}\n", "export const cloneRecursive = (\n  value,\n) => {\n  if (typeof (value) === 'object') {\n    if (Array.isArray(value)) {\n      const clone = []\n      for (let i = 0; i < value.length; i++) {\n        clone.push(cloneRecursive(value[i]))\n      }\n      value = clone\n    } else {\n      const clone = {}\n      for (const key in value) {\n        clone[key] = cloneRecursive(value[key])\n      }\n      value = clone\n    }\n  }\n  return value\n}\n", "export const callOnce = (\n  method,\n) => {\n  let called = false\n  let result = null\n  return () => {\n    if (!called) {\n      called = true\n      result = method()\n    }\n    return result\n  }\n}\n", "import { create } from '@doars/vroagn'\nimport { cloneRecursive } from '../utilities/clone.js'\nimport { callOnce } from '../utilities/singleton.js'\n\nexport const apiSettings = Object.freeze({\n  code: 'anthropic',\n  name: 'Anthropic',\n  preferredModel: 'claude-3-5-haiku-20241022',\n  preferredModelName: 'Claude 3.5 Haiku',\n  requireCredentials: true,\n  modelOptionsFilter: model =>\n    ![\n      '(old)',\n    ].some(keyword => model.name.toLowerCase().includes(keyword))\n})\n\nconst _createMessage = callOnce(\n  () => create({\n    credentials: 'same-origin',\n    domain: 'https://api.anthropic.com',\n    method: 'post',\n    mode: 'cors',\n    path: '/v1/messages',\n    headers: {\n      'Accept': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'anthropic-dangerous-direct-browser-access': 'true',\n      'anthropic-version': '2023-06-01',\n      'Content-Type': 'application/json',\n    },\n  }),\n)\nexport const createMessage = (\n  state,\n  messages,\n  context = null,\n  instructions = null,\n) => {\n  messages = cloneRecursive(messages)\n  if (instructions) {\n    messages.unshift({\n      role: 'user',\n      content: instructions,\n    })\n  }\n\n  return _createMessage()({\n    headers: {\n      'x-api-key': state.apiCredentials,\n    },\n    body: {\n      model: state.apiModel ?? apiSettings.preferredModel,\n      messages: messages,\n      system: context,\n    },\n  }).then(([error, response, result]) => {\n    if (!error) {\n      result = {\n        role: 'assistant',\n        content: result?.content?.[0].text,\n      }\n    }\n    return [error, response, result]\n  })\n}\n\nconst _getModels = callOnce(\n  () => create({\n    credentials: 'same-origin',\n    domain: 'https://api.anthropic.com',\n    mode: 'cors',\n    path: '/v1/models',\n    headers: {\n      'Accept': 'application/json',\n      'Access-Control-Allow-Origin': '*',\n      'anthropic-dangerous-direct-browser-access': 'true',\n      'anthropic-version': '2023-06-01',\n    },\n  }),\n)\nexport const getModels = (\n  state,\n) => {\n  return _getModels()({\n    headers: {\n      'x-api-key': state.apiCredentials,\n    },\n  }).then(([error, response, result]) => {\n    if (!error) {\n      result.data = result.data.map(item => {\n        return {\n          ...item,\n          name: item.display_name,\n        }\n      })\n    }\n    return [error, response, result]\n  })\n}\n", "import { create } from '@doars/vroagn'\nimport { cloneRecursive } from '../utilities/clone.js'\nimport { callOnce } from '../utilities/singleton.js'\n\nexport const apiSettings = Object.freeze({\n  code: 'deepseek',\n  name: 'DeepSeek',\n  preferredModel: 'deepseek-chat',\n  // preferredModelName: 'GPT 4o-mini',\n  requireCredentials: true,\n  // modelOptionsFilter: model =>\n  //   ![\n  //   ].some(keyword => model.id.toLowerCase().includes(keyword))\n  //   && !model.id.match(/-(?:\\d){4}$/)\n  //   && !model.id.match(/-(?:\\d){4}-(?:\\d){2}-(?:\\d){2}$/)\n})\n\nconst _createMessage = callOnce(\n  () => create({\n    method: 'post',\n    domain: 'https://api.deepseek.com',\n    path: '/v1/chat/completions',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n  }),\n)\nexport const createMessage = (\n  state,\n  messages,\n  context = null,\n  instructions = null,\n) => {\n  messages = cloneRecursive(messages)\n\n  const prependAppRole = (\n    message,\n  ) => {\n    if (message) {\n      if (\n        messages.length > 0\n        && messages[0].role === 'system'\n      ) {\n        messages[0].content = message + ' ' + messages[0].content\n      } else {\n        messages.unshift({\n          role: 'system',\n          content: message,\n        })\n      }\n    }\n  }\n  prependAppRole(instructions)\n  // Check context afterwards so the instructions come after the context.\n  prependAppRole(context)\n\n  return _createMessage()({\n    headers: {\n      Authorization: 'Bearer ' + state.apiCredentials,\n    },\n    body: {\n      model: state.apiModel ?? apiSettings.preferredModel,\n      messages: messages,\n      user: state.userIdentifier,\n    },\n  }).then(([error, response, result]) => {\n    if (!error) {\n      result = result?.choices?.[0]?.message\n    }\n    return [error, response, result]\n  })\n}\n\nconst _getModels = callOnce(\n  () => create({\n    domain: 'https://api.deepseek.com',\n    path: '/v1/models',\n    headers: {\n      'Accept': 'application/json',\n    },\n  }),\n)\nexport const getModels = (\n  state,\n) => _getModels()({\n  headers: {\n    Authorization: 'Bearer ' + state.apiCredentials,\n  },\n})\n", "import { create } from '@doars/vroagn'\nimport { cloneRecursive } from '../utilities/clone.js'\nimport { callOnce } from '../utilities/singleton.js'\n\nexport const apiSettings = Object.freeze({\n  code: 'google',\n  name: 'Google AI',\n  preferredModel: 'gemini-2.0-flash',\n  preferredModelName: 'Gemini 2.0 Flash',\n  requireCredentials: true,\n  modelOptionsFilter: model =>\n    ![\n      'aqa',\n      'bison',\n      'embedding',\n      'image',\n      'learnlm',\n      'vision',\n      '1.0',\n      '1.5',\n    ].some(keyword => model.id.toLowerCase().includes(keyword))\n    && !model.id.match(/-(?:\\d){3,4}$/)\n    && !model.id.match(/-(?:\\d){2}-(?:\\d){2}$/)\n})\n\nconst _createMessage = callOnce(\n  () => create({\n    domain: 'https://generativelanguage.googleapis.com',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n    method: 'post',\n  }),\n)\nexport const createMessage = (\n  state,\n  messages,\n  context = null,\n  instructions = null,\n) => {\n  messages = cloneRecursive(messages)\n\n  return _createMessage()({\n    path: '/v1beta/models/' + (state.apiModel ?? apiSettings.preferredModel) + ':generateContent?key=' + state.apiCredentials,\n    body: {\n      system_instruction: (\n        (context || instructions)\n          ? {\n            parts: [context, instructions]\n              .filter(text => text)\n              .map(text => ({\n                text: text,\n              })),\n          } : undefined\n      ),\n      contents: (\n        messages.length > 0\n          ? messages.map(message => ({\n            parts: [{\n              text: message.content,\n            }],\n            role: (\n              message.role === 'assistant'\n                ? 'model'\n                : 'user'\n            ),\n          }))\n          : { parts: { text: '' } }\n      ),\n    },\n  }).then(([error, response, result]) => {\n    if (!error) {\n      result = {\n        content: (\n          result?.candidates?.[0]?.content?.parts\n            ?.map(part => part.text).join(' ')\n        ),\n        role: 'assistant',\n      }\n    }\n    return [error, response, result]\n  })\n}\n\nconst _getModels = callOnce(\n  () => create({\n    domain: 'https://generativelanguage.googleapis.com',\n    headers: {\n      'Accept': 'application/json',\n    },\n  }),\n)\nexport const getModels = (\n  state,\n) => _getModels()({\n  path: '/v1beta/models?pageSize=1000&key=' + state.apiCredentials,\n})\n  .then(([error, response, result]) => {\n    if (!error) {\n      result = {\n        data: result.models.map(model => ({\n          ...model,\n          id: model.name.split('/').pop(),\n          name: model.displayName,\n        })),\n      }\n    }\n    return [error, response, result]\n  })\n", "import { create } from '@doars/vroagn'\nimport { cloneRecursive } from '../utilities/clone.js'\nimport { callOnce } from '../utilities/singleton.js'\n\nexport const apiSettings = Object.freeze({\n  code: 'open_ai',\n  name: 'OpenAI',\n  preferredModel: 'gpt-4o-mini',\n  // preferredModelName: 'GPT 4o-mini',\n  requireCredentials: true,\n  modelOptionsFilter: model =>\n    ![\n      'babbage-',\n      'dall-e-',\n      'davinci-',\n      'embedding-',\n      'moderation-',\n      'tts-',\n      'whisper-',\n    ].some(keyword => model.id.toLowerCase().includes(keyword))\n    && !model.id.match(/-(?:\\d){4}$/)\n    && !model.id.match(/-(?:\\d){4}-(?:\\d){2}-(?:\\d){2}$/)\n})\n\nconst _createMessage = callOnce(\n  () => create({\n    method: 'post',\n    domain: 'https://api.openai.com',\n    path: '/v1/chat/completions',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n    },\n  }),\n)\nexport const createMessage = (\n  state,\n  messages,\n  context = null,\n  instructions = null,\n) => {\n  // Use 'system' role for OpenAI API models that contain '4o' or '3.5'.\n  const appRole = (\n    (state.apiModel ?? apiSettings.preferredModel).toLowerCase().match(/4o|3\\.5/)\n      ? 'system'\n      : 'developer'\n  )\n\n  messages = cloneRecursive(messages)\n\n  const prependAppRole = (\n    message,\n  ) => {\n    if (message) {\n      if (\n        messages.length > 0\n        && messages[0].role === appRole\n      ) {\n        messages[0].content = message + ' ' + messages[0].content\n      } else {\n        messages.unshift({\n          role: appRole,\n          content: message,\n        })\n      }\n    }\n  }\n  prependAppRole(instructions)\n  // Check context afterwards so the instructions come after the context.\n  prependAppRole(context)\n\n  return _createMessage()({\n    headers: {\n      Authorization: 'Bearer ' + state.apiCredentials,\n    },\n    body: {\n      model: state.apiModel ?? apiSettings.preferredModel,\n      messages: messages,\n      user: state.userIdentifier,\n    },\n  }).then(([error, response, result]) => {\n    if (!error) {\n      result = result?.choices?.[0]?.message\n    }\n    return [error, response, result]\n  })\n}\n\nconst _getModels = callOnce(\n  () => create({\n    domain: 'https://api.openai.com',\n    path: '/v1/models',\n    headers: {\n      'Accept': 'application/json',\n    },\n  }),\n)\nexport const getModels = (\n  state,\n) => _getModels()({\n  headers: {\n    Authorization: 'Bearer ' + state.apiCredentials,\n  },\n})\n", "\nimport {\n  apiSettings as apiSettingsAnthropic,\n  createMessage as createMessageAnthropic,\n  getModels as getModelsAnthropic,\n} from './anthropic.js'\nimport {\n  apiSettings as apiSettingsDeepseek,\n  createMessage as createMessageDeepseek,\n  getModels as getModelsDeepseek,\n} from './deepseek.js'\nimport {\n  apiSettings as apiSettingsGoogle,\n  createMessage as createMessageGoogle,\n  getModels as getModelsGoogle,\n} from './google.js'\nimport {\n  apiSettings as apiSettingsOpenAI,\n  createMessage as createMessageOpenAI,\n  getModels as getModelsOpenAI,\n} from './open-ai.js'\n\nexport const APIS = Object.freeze({\n  anthropic: apiSettingsAnthropic,\n  deepseek: apiSettingsDeepseek,\n  google: apiSettingsGoogle,\n  open_ai: apiSettingsOpenAI,\n})\n\nconst callApi = (\n  lookupTable,\n  state,\n  ...parameters\n) => {\n  let method = null\n  if (state.apiProvider) {\n    method = lookupTable[state.apiProvider]\n  }\n  if (method) {\n    return method(state, ...parameters)\n  }\n  return Promise.resolve(\n    [new Error('No api selected.'), null, null],\n  )\n}\n\nexport const createMessage = (\n  state,\n  messages,\n  context = null,\n  instructions = null,\n) => callApi({\n  [APIS.anthropic.code]: createMessageAnthropic,\n  [APIS.deepseek.code]: createMessageDeepseek,\n  [APIS.google.code]: createMessageGoogle,\n  [APIS.open_ai.code]: createMessageOpenAI,\n}, state, messages, context, instructions)\n\nexport const getModels = (\n  state,\n) => callApi({\n  [APIS.anthropic.code]: getModelsAnthropic,\n  [APIS.deepseek.code]: getModelsDeepseek,\n  [APIS.google.code]: getModelsGoogle,\n  [APIS.open_ai.code]: getModelsOpenAI,\n}, state)\n\nexport const isReady = (\n  state,\n) => {\n  return (\n    state.apiProvider\n    && APIS[state.apiProvider]\n    && (\n      !APIS[state.apiProvider]?.requireCredentials\n      || state.apiCredentialsTested\n    )\n    && (state.apiModel ?? APIS[state.apiProvider].preferredModel)\n    && state.apiModels?.data?.some(\n      (model) => model.id === (state.apiModel ?? APIS[state.apiProvider].preferredModel)\n    )\n  )\n}\n", "export const LOCALES = Object.freeze({\n  dan: 'dan', // Danish\n  deu: 'deu', // German\n  eng: 'eng', // English\n  epo: 'epo', // Esperanto\n  fra: 'fra', // French\n  fry: 'fry', // Frisian (West)\n  isl: 'isl', // Icelandic\n  ita: 'ita', // Italian\n  nld: 'nld', // Dutch\n  nno: 'nno', // Norwegian (Nynorsk)\n  nob: 'nob', // Norwegian (Bokm\u00E5l)\n  por: 'por', // Portuguese\n  spa: 'spa', // Spanish\n  swe: 'swe', // Swedish\n  vls: 'vls', // Flemish\n})\n\nexport const LOCALE_CODES = Object.keys(LOCALES)\n\nexport const getLanguageFromLocale = (\n  localeCode\n) => (localeCode ?? '').split('_')[0].split('-')[0]\n\nexport const getPreferredLocale = (\n) => (\n  window.navigator.languages\n    .map(\n      (languageCode) =>\n        languageCode.split('-').filter(\n          (_segment, index) => index < 2\n        ).join('-').replace('-', '_').toLowerCase())\n    .reduce((preferredLanguage, languageCode) => {\n      if (preferredLanguage) {\n        return preferredLanguage\n      }\n      for (let i = 0; i < LOCALE_CODES.length; i++) {\n        const possibleLanguage = LOCALE_CODES[i]\n        if (languageCode === possibleLanguage) {\n          return possibleLanguage\n        }\n        if (possibleLanguage.startsWith(languageCode + '_')) {\n          return possibleLanguage\n        }\n      }\n      return preferredLanguage\n    }, null)\n) ?? LOCALES.eng\n\nexport const setLangAttribute = (\n  state,\n) => {\n  document.documentElement.setAttribute(\n    'lang',\n    state.sourceLocale,\n  )\n}\n\nexport const PROFICIENCY_LEVELS = Object.freeze({\n  a1: 'a1',\n  a2: 'a2',\n  b1: 'b1',\n  b2: 'b2',\n  c1: 'c1',\n  c2: 'c2',\n})\n\nexport const PROFICIENCY_LEVEL_CODES = Object.keys(PROFICIENCY_LEVELS)\n", "export const SCREENS = Object.freeze({\n  clarification: 'clarification',\n  comprehension: 'comprehension',\n  conversation: 'conversation',\n  reading: 'reading',\n  rewrite: 'rewrite',\n  story: 'story',\n  vocabulary: 'vocabulary',\n\n  overview: 'overview',\n  options: 'options',\n  migrate: 'migrate',\n  setup: 'setup',\n})\n", "export const STORAGE_KEY = 'toaln:state'\n", "import { LOCALES } from './locales.js'\n\nexport const translate = (\n  state,\n  key,\n  locale = null,\n) => {\n  locale ??= state.sourceLocale\n  if (!(locale in TRANSLATIONS)) {\n    console.warn('There are no translations available for the language \"' + locale + '\".')\n    return key\n  }\n  if (!(key in TRANSLATIONS[locale])) {\n    console.warn('There are no translations available for the language \"' + locale + '\" with the key \"' + key + '\".')\n    return key\n  }\n\n  /**\n   * Replaces parts of a text surrounded by {% and %} with values from the state or other translations. Use {%s:%} to look something up in the state, and use {%t:text_here%} to look something up in the translations.\n   * @param {string} text Text to replace parts of.\n   * @returns {string} Replaced text.\n   */\n  const replace = (text) => {\n    if (!text) {\n      return text\n    }\n    if (Array.isArray(text)) {\n      return text.map(item => replace(item))\n    }\n\n    return text\n      .replace(\n        /{%s:([^%]+)%}/g,\n        (match, key) => {\n          let value = key.split('.').reduce(\n            (innerState, keySegment) => innerState?.[keySegment],\n            state\n          )\n          if (\n            value !== undefined\n            && value !== null\n          ) {\n            if (Array.isArray(value)) {\n              return value.join(' ')\n            }\n            return value.toString()\n          }\n          return match\n        })\n      .replace(\n        /{%t:([^%]+)%}/g,\n        (match, key) => {\n          if (key in TRANSLATIONS[locale]) {\n            let value = TRANSLATIONS[locale][key]\n            if (\n              value !== undefined\n              && value !== null\n            ) {\n              if (Array.isArray(value)) {\n                return value.join(' ')\n              }\n              return value.toString()\n            }\n          }\n          return match\n        })\n  }\n  return replace(TRANSLATIONS[locale][key])\n}\n\nexport const TRANSLATIONS = Object.freeze({\n  [LOCALES.eng]: {\n    [LOCALES.dan]: 'Danish',\n    [LOCALES.deu]: 'German',\n    [LOCALES.eng]: 'English (United Kingdom)',\n    [LOCALES.epo]: 'Esperanto',\n    [LOCALES.fra]: 'French',\n    [LOCALES.fry]: 'Frisian (West)',\n    [LOCALES.isl]: 'Icelandic',\n    [LOCALES.nld]: 'Dutch',\n    [LOCALES.nno]: 'Norwegian (Nynorsk)',\n    [LOCALES.nob]: 'Norwegian (Bokm\u00E5l)',\n    [LOCALES.por]: 'Portuguese',\n    [LOCALES.spa]: 'Spanish',\n    [LOCALES.swe]: 'Swedish',\n    [LOCALES.ita]: 'Italian',\n    [LOCALES.vls]: 'Flamish',\n\n    'proficiency_name-a1': 'A1: Beginner',\n    'proficiency_description-a1': [\n      // 'Spoken interaction: You can interact in a simple way provided the other person is prepared to repeat or rephrase things at a slower rate of speech and help me formulate what you are trying to say. You can ask and answer simple questions in areas of immediate need or on very familiar topics.',\n      // 'Spoken production: You can use simple phrases and sentences to describe where you live and people you know.',\n      // 'Listening: You can recognise familiar words and very basic phrases concerning yourself, your family and immediate concrete surroundings when people speak slowly and clearly.',\n      'Reading: You can understand familiar names, words and very simple sentences, for example on notices and posters or in catalogues.',\n      'Writing: You can write a short, simple postcard, for example sending holiday greetings. You can fill in forms with personal details, for example entering my name, nationality and address on a hotel registration form.',\n    ],\n    'proficiency_example-a1': '\"Hello! My name is Maria. I live in a small house in London with my family. I have one brother and one sister. I like to eat apples and pears. What is your favourite fruit?\"',\n    'proficiency_name-a2': 'A2: Pre-intermediate',\n    'proficiency_description-a2': [\n      // 'Spoken interaction: You can communicate in simple and routine tasks requiring a simple and direct exchange of information on familiar topics and activities. You can handle very short social exchanges, even though I can\\'t usually understand enough to keep the conversation going yourself.',\n      // 'Spoken production: You can use a series of phrases and sentences to describe in simple terms your family and other people, living conditions, your educational background and your present or most recent job.',\n      // 'Listening: You can understand phrases and the highest frequency vocabulary related to areas of most immediate personal relevance (e.g. very basic personal and family information, shopping, local area, employment). You can catch the main point in short, clear, simple messages and announcements.',\n      'Reading: You can read very short, simple texts. You can find specific, predictable information in simple everyday material such as advertisements, prospectuses, menus and timetables and you can understand short simple personal letters.',\n      'Writing: You can write short, simple notes and messages relating to matters in areas of immediate needs. You can write a very simple personal letter, for example thanking someone for something.',\n    ],\n    'proficiency_example-a2': '\"Last weekend, I went to the park with my friends. We had a picnic with sandwiches and juice. The weather was sunny, and we played football. After that, we went to a caf\u00E9 and had some ice cream. It was a fun day!\"',\n    'proficiency_name-b1': 'B1: Intermediate',\n    'proficiency_description-b1': [\n      // 'Spoken interaction: You can deal with most situations likely to arise whilst travelling in an area where the language is spoken. You can enter unprepared into conversation on topics that are familiar, of personal interest or pertinent to everyday life (e.g. family, hobbies, work, travel and current events).',\n      // 'Spoken production: You can connect phrases in a simple way in order to describe experiences and events, your dreams, hopes and ambitions. You can briefly give reasons and explanations for opinions and plans. You can narrate a story or relate the plot of a book or film and describe your reactions.',\n      // 'Listening: You can understand the main points of clear standard speech on familiar matters regularly encountered in work, school, leisure, etc. You can understand the main point of many radio or TV programmes on current affairs or topics of personal or professional interest when the delivery is relatively slow and clear.',\n      'Reading: You can understand texts that consist mainly of high frequency every day or job-related language. You can understand the description of events, feelings and wishes in personal letters.',\n      'Writing: You can write simple connected text on topics which are familiar or of personal interest. You can write personal letters describing experiences and impressions.',\n    ],\n    'proficiency_example-b1': '\"I enjoy reading books, especially mystery novels. Recently, I finished a story about a detective who solved a difficult case. It was very interesting, and I couldn\\'t stop reading. I like mysteries because they make me think and try to guess the ending.\"',\n    'proficiency_name-b2': 'B2: Upper-intermediate',\n    'proficiency_description-b2': [\n      // 'Spoken interaction: You can interact with a degree of fluency and spontaneity that makes regular interaction with native speakers quite possible. You can take an active part in discussion in familiar contexts, accounting for and sustaining your views.',\n      // 'Spoken production: You can present clear, detailed descriptions on a wide range of subjects related to your field of interest. You can explain a viewpoint on a topical issue giving the advantages and disadvantages of various options.',\n      // 'Listening: You can understand extended speech and lectures and follow even complex lines of argument provided the topic is reasonably familiar. You can understand most TV news and current affairs programmes. You can understand the majority of films in standard dialect.',\n      'Reading: You can read articles and reports concerned with contemporary problems in which the writers adopt particular attitudes or viewpoints. You can understand contemporary literary prose.',\n      'Writing: You can write clear, detailed text on a wide range of subjects related to my interests. You can write an essay or report, passing on information or giving reasons in support of or against a particular point of view. You can write letters highlighting the personal significance of events and experiences.',\n    ],\n    'proficiency_example-b2': '\"The concept of remote work has become increasingly popular in recent years. It offers flexibility and convenience for employees, allowing them to work from anywhere. However, it also presents challenges, such as maintaining productivity and communication with colleagues. Overall, I think the benefits outweigh the drawbacks.\"',\n    'proficiency_name-c1': 'C1: Advanced',\n    'proficiency_description-c1': [\n      // 'Spoken interaction: You can express yourself fluently and spontaneously without much obvious searching for expressions. You can use language flexibly and effectively for social and professional purposes. You can formulate ideas and opinions with precision and relate your contribution skilfully to those of other speakers.',\n      // 'Spoken production: You can present clear, detailed descriptions of complex subjects integrating sub-themes, developing particular points and rounding off with an appropriate conclusion.',\n      // 'Listening: You can understand extended speech even when it is not clearly structured and when relationships are only implied and not signalled explicitly. You can understand television programmes and films without too much effort.',\n      'Reading: You can understand long and complex factual and literary texts, appreciating distinctions of style. You can understand specialised articles and longer technical instructions, even when they do not relate to your field.',\n      'Writing: You can express yourself in clear, well-structured text, expressing points of view at some length. You can write about complex subjects in a letter, an essay or a report, underlining what you consider to be the salient issues. You can select style appropriate to the reader in mind.',\n    ],\n    'proficiency_example-c1': '\"Climate change is one of the most pressing issues of our time. While renewable energy sources such as wind and solar power are growing in importance, transitioning away from fossil fuels remains a significant challenge. Governments must collaborate with industries and communities to create sustainable policies that balance economic growth with environmental conservation.\"',\n    'proficiency_name-c2': 'C2: Proficient',\n    'proficiency_description-c2': [\n      // 'Spoken interaction: You can take part effortlessly in any conversation or discussion and have a good familiarity with idiomatic expressions and colloquialisms. You can express yourself fluently and convey finer shades of meaning precisely. If you do have a problem you can backtrack and restructure around the difficulty so smoothly that other people are hardly aware of it.',\n      // 'Spoken production: You can present a clear, smoothly-flowing description or argument in a style appropriate to the context and with an effective logical structure which helps the recipient to notice and remember significant points.',\n      // 'Listening: You have no difficulty in understanding any kind of spoken language, whether live or broadcast, even when delivered at fast native speed, provided. You have some time to get familiar with the accent.',\n      'Reading: You can read with ease virtually all forms of the written language, including abstract, structurally or linguistically complex texts such as manuals, specialised articles and literary works.',\n      'Writing: You can write clear, smoothly-flowing text in an appropriate style. You can write complex letters, reports or articles which present a case with an effective logical structure which helps the recipient to notice and remember significant points. You can write summaries and reviews of professional or literary works.',\n    ],\n    'proficiency_example-c2': '\"The nuances of linguistic evolution reveal much about cultural and societal shifts over time. For instance, the adoption of loanwords often signals a period of cultural exchange or influence. Analysing such patterns not only enhances our understanding of language development but also offers profound insights into historical relationships between civilizations. This dynamic interplay underscores the complexity and interconnectedness of human communication.\"',\n\n    'prompt-context': 'You are an expert in and teacher of {%t:{%s:targetLocale%}%}. The user is studying {%t:{%s:targetLocale%}%}. The user already masters the language at CEFR level {%s:proficiencyLevel%}. This means that the user already has the following skills: \"{%t:proficiency_description-{%s:proficiencyLevel%}%}\". However, the user wants to improve their proficiency further.',\n    'prompt-comprehension': 'Write a reading and writing exercise where the user receives a text in {%t:{%s:targetLocale%}%} along with a question in {%t:{%s:sourceLocale%}%} about the text, to which the user must respond in {%t:{%s:targetLocale%}%}. Do not provide any further instructions, explanations, or answers to the user. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-comprehension-follow_up': 'Provide feedback on the reading and writing exercise given. Offer concise feedback on the {%t:{%s:targetLocale%}%} with in-depth analysis that is clear enough for the user\\'s level of knowledge. Write the feedback in {%t:{%s:sourceLocale%}%}. Focus exclusively on linguistic aspects and ignore content-related evaluations or interpretations of the message. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-conversation': 'You will simulate a conversation with the user in {%t:{%s:targetLocale%}%}. Do not provide any further instructions or explanations to the user. Always write in plain text without any formatting, labels, headings, or lists. Write the first message in the conversation, immediately introducing a topic to discuss.',\n    'prompt-conversation-follow_up': 'You are simulating a conversation with the user in {%t:{%s:targetLocale%}%}. First, provide brief, in-depth feedback on the message in {%t:{%s:sourceLocale%}%}, focusing solely on linguistic aspects and ignoring any content-related evaluations or interpretations. Then, respond to the message in {%t:{%s:targetLocale%}%}. Do not provide any further instructions or explanations to the user. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-clarification': 'The user has a question below, answer it concisely with in-depth feedback, appropriate to the user\\'s proficiency level. Answer the question {%t:{%s:sourceLocale%}%} and provide examples in {%t:{%s:targetLocale%}%} where appropriate. Always write in plain text without any formatting, labels, headings, or lists. Do not answer the question if it is not language-related.',\n    'prompt-reading': 'Write a text in {%t:{%s:targetLocale%}%}, but for every paragraph written write the same paragraph below in {%t:{%s:sourceLocale%}%} as well. Don\\'t output any content in regards to the users learning journey, focus on creating a enjoyable text to practise reading. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-reading-topic': 'The generate text should be about the following topic:',\n    'prompt-rewrite': 'Rewrite the user provided text into {%t:{%s:targetLocale%}%} at the users CEFR level of {%s:proficiencyLevel%}. Ensure no information is lost when translating. Always write in plain text without any additional commentary.',\n    'prompt-story': 'You and the user will collaboratively write a story by taking turns adding sections. Begin by writing the first section of the story in {%t:{%s:targetLocale%}%}, introducing an engaging theme or setting. Focus on having fun and practising the language. Do not include any additional instructions, explanations, formatting, labels, or headings.',\n    'prompt-story-follow_up': 'You are continuing the collaborative story-writing session with the user. First, provide concise, in-depth feedback in {%t:{%s:sourceLocale%}%} on the user\\'s latest section, focusing solely on linguistic aspects and suggesting improvements. Avoid any comments about the story\\'s plot, logic, or content. Then, add your next section of the story in {%t:{%s:targetLocale%}%}. Write your response in plain text without any formatting, labels, or headings.',\n    'prompt-topic': ' Incorporate the following topic into your message \"{%topic%}\".',\n    'prompt-vocabulary': 'Write a word in {%t:{%s:targetLocale%}%} along with its definition in {%t:{%s:sourceLocale%}%}. The user will then write a sentence in {%t:{%s:targetLocale%}%} in which this word must be used. Take into account the user\\'s skill and language level. Do not provide any additional instructions, explanations, or the answer to the user. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-vocabulary-follow_up': 'Provide feedback on the sentence in which the user has answered. Check whether the word has been used correctly in the sentence. Provide concise feedback on the {%t:{%s:targetLocale%}%} with considerable depth that is clear enough for the user\\'s level of knowledge. Write the feedback in {%t:{%s:sourceLocale%}%}. Focus exclusively on linguistic aspects and ignore content-related evaluations or interpretations of the message. Always write in plain text without any formatting, labels, headings, or lists.',\n\n    'prompt-translate': 'The user has requested a translation of the selected text. Translate all the {%t:{%s:sourceLocale%}%} into {%t:{%s:targetLocale%}%} and {%t:{%s:targetLocale%}%} into {%t:{%s:sourceLocale%}%}. Do not provide any further instructions or explanations to the user. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-translate-user': 'Translate the selected text in {%t:{%s:sourceLocale%}%}. The user has selected the following text: \"{%s:selection.text%}\".',\n    'prompt-translate-context': 'It was selected from the context: \"{%s:selection.context%}\". Translate only the selected text and not the entire context.',\n    'prompt-explain': 'The users has requested an explanation of the text. Delve into all the details of the text and provide a clear and concise explanation. Provide additional examples if it fits the explanation. Always write in plain text without any formatting, labels, headings, or lists.',\n    'prompt-explain-user': 'Explain the selected text in {%t:{%s:sourceLocale%}%}. The user has selected the following text: \"{%s:selection.text%}\".',\n    'prompt-explain-context': 'It was selected from the context: \"{%s:selection.context%}\". Explain only the selected text and not the entire context.',\n\n    'greeting': 'Hi!',\n    'credits-link': 'Made by {%name%}',\n\n    'button-answer': 'Answer',\n    'button-ask': 'Ask',\n    'button-close': 'Close',\n    'button-generate': 'Generate',\n    'button-go_back': 'Go back',\n    'button-reload': 'Reload',\n    'button-reply': 'Reply',\n    'button-reset': 'Reset',\n    'button-rewrite': 'Rewrite',\n    'context-translate': 'Translate selection',\n    'context-explain': 'Explain selection',\n    'context-copy': 'Copy selection',\n    'select_an_option': 'Select an option',\n\n    'banner-update_now': 'There is an update available, click here to update now!',\n\n    'popup-explain': 'Explain the text below:',\n    'popup-translate': 'Translate the text below:',\n\n    'setup-source_language': 'So, you want to improve your proficiency in a language? Let this app help you practise. We need to start by choosing a language you already know.',\n    'setup-target_language': 'Now the next step, which language would you like to learn?',\n    'setup-proficiency_level': 'How proficient would you say you already are in the language? See the explanation below along with an example text to get an idea of what kind of texts to expect.',\n    'setup-topics_of_interest': 'It\\'s much more enjoyable if the exercises sometimes feature a topic you find interesting. Therefore, fill in a few topics below that can regularly appear. Think mainly of any hobbies or other interests. The more, the better!',\n    'setup-api_provider': 'This app uses a \"Large Language Model\" to generate and assess exercises. You may have heard about it, everyone in the tech sector keeps talking about developments in artificial intelligence. The app uses an LLM, but doesn\\'t come with one, so we need to link it to an LLM provider. Which provider would you like to use?',\n    'setup-api_credentials': 'Now, the important question is the key. You can get it from the developer\\'s dashboard. It probably states that you shouldn\\'t share it with third parties. Fortunately, this app never sends the key elsewhere. Still not convinced? Check out the app\\'s source code or wait for a version that no longer requires this.',\n    'setup-test_api_credentials': 'Test key',\n    'setup-api_credentials_untested': 'Test the credentials before proceeding.',\n    'setup-api_credentials_tested': 'The provided key works. Now you can choose which \"Large Language Model\" to use. Not sure what the differences are? No problem, we recommend selecting \"{%preferredModel%}\". That should be fine.',\n    'setup-outro': 'Good luck and have fun!',\n    'setup-next': 'Start practising',\n\n    'overview-intro': 'What would you like to do?',\n    'overview-clarification-description': 'Get explanations about {%t:{%s:targetLanguage%}%}, such as a grammar rule like conjugations or cases.',\n    'overview-clarification-title': 'Ask for clarification',\n    'overview-comprehension-description': 'You\\'ll receive a short text along with a question to answer.',\n    'overview-comprehension-title': 'Answer questions',\n    'overview-conversation-description': 'A short conversation will be simulated, for example about ordering food or discussing a hobby.',\n    'overview-conversation-title': 'Practise conversations',\n    'overview-migrate-description': 'Export, import or reset your data.',\n    'overview-migrate-title': 'Manage data',\n    'overview-options-description': 'Change the language you want to learn, the topics you find interesting, or the LLM used.',\n    'overview-options-title': 'Change settings',\n    'overview-reading-description': 'You can generate a text where each paragraph is available in both languages.',\n    'overview-reading-title': 'Read texts',\n    'overview-rewrite-description': 'You can let the LLM rewrite a text into {%t:{%s:targetLanguage%}%} at your proficiency level.',\n    'overview-rewrite-title': 'Rewrite texts',\n    'overview-story-description': 'You\\'ll take turns writing a story piece by piece.',\n    'overview-story-title': 'Write a story',\n    'overview-vocabulary-description': 'You\\'ll receive a word together with its definition, you then respond with a with a sentence using that word.',\n    'overview-vocabulary-title': 'Learn words',\n\n    'options-source_language': 'Which language do you already know?',\n    'options-target_language': 'Which language would you like to learn?',\n    'options-proficiency_level': 'How proficient are you in the language? See the explanation below along with an example text to get an idea of what kind of texts to expect.',\n    'options-topics_of_interest': 'Fill in a few topics below that can regularly appear in the exercises.',\n    'options-api_provider': 'This app uses a \"Large Language Model\" to generate and assess exercises. Which provider would you like to link?',\n    'options-api_credentials': 'Enter the key from the developer\\'s dashboard.',\n    'options-test_api_credentials': 'Test key',\n    'options-api_credentials_untested': 'Test the credentials before proceeding.',\n    'options-api_credentials_tested': 'The provided key works. Choose a \"Large Language Model\" to use, we recommend \"{%preferredModel%}\".',\n\n    'migrate-export': 'Export the data the app has stored. It is important to note the export does not contain the API key used to access an LLM provider. When importing data this will need to be applied again.',\n    'migrate-export_button': 'Download your data',\n    'migrate-import': 'Import previously exported data. When an import has been done it cannot be undone, so be careful! It is recommended to export your existing data before overwriting it with a new import. After the import has been successful you will be brought back to the setup screen with the import applied.',\n    'migrate-import_button': 'Upload your data',\n    'migrate-reset': 'Remove all the data and reset the app. Once performed this action can not be undone.',\n    'migrate-reset_button': 'Reset',\n    'migrate-reset_button-confirmation': 'I confirm that I am absolutely certain I want to reset!',\n\n    'statistics-activity_per_category': 'You have already read {%s:statisticReadingActivity%} texts, let {%s:statisticRewriteActivity%} texts be rewritten, answered {%s:statisticComprehensionActivity%} questions, {%s:statisticVocabularyActivity%} words practised, sent {%s:statisticConversationActivity%} messages, told {%s:statisticStoryActivity%} stories, and asked {%s:statisticClarificationActivity%} questions.',\n    'statistics-no_activity': 'Unfortunately, you haven\\'t completed enough activities yet to display here. Go to the overview and choose an exercise to start. Your progress will be tracked in the background.',\n    'statistics-no_activity_streak': 'Currently you have no ongoing activity streak. You can build one by completing at least one exercise on consecutive days.',\n    'statistics-current_activity_streak': 'Your current activity streak is {%s:statisticCurrentActivityStreak%} days long. Don\\'t loose it and practise before midnight to extend it!',\n    'statistics-extended_activity_streak': 'Good job, you extended your streak for today! Your current activity streak is {%s:statisticCurrentActivityStreak%} days long.',\n    'statistics-longest_activity_streak': 'Your longest activity streak ever was {%s:statisticLongestActivityStreak%} days long.',\n\n    'clarification-intro': 'What would you like more information about?',\n    'clarification-placeholder': 'I\\'m wondering about...',\n    'comprehension-intro': 'In a moment you\\'ll read a text in {%t:{%s:targetLanguage%}%} along with a question about it. Answer the question in {%t:{%s:targetLanguage%}%}. You\\'ll then receive some feedback regarding your answer.',\n    'conversation-intro': 'In a moment you\\'ll simulate a conversation in {%t:{%s:targetLanguage%}%}, so always respond in {%t:{%s:targetLanguage%}%}. You may receive feedback along the way.',\n    'reading-intro': 'You will be reading a text where each paragraph is written in both {%t:{%s:targetLanguage%}%} and {%t:{%s:sourceLanguage%}%} allowing you to practise your reading. You can optionally provide a topic for the text to be about.',\n    'reading-placeholder': 'I want to read about...',\n    'rewrite-intro': 'You can enter in a text below. The LLM will ensure the text is in {%t:{%s:sourceLanguage%}%} at your selected proficiency level.',\n    'rewrite-placeholder': 'I want to let rewrite...',\n    'story-intro': 'You\\'re about to write a story in {%t:{%s:targetLanguage%}%} where, in turns, you add a piece. Don\\'t worry about whether the story is good, logical, or well-founded; just make sure you practice the language. Therefore, always respond in {%t:{%s:targetLanguage%}%}. In between, you might receive some feedback on your writing.',\n    'vocabulary-intro': 'In a moment you\\'ll read a word together with its definition in {%t:{%s:targetLanguage%}%}. Answer with a scentence that uses the word in {%t:{%s:targetLanguage%}%}. You\\'ll then receive some feedback regarding your answer.',\n  },\n  [LOCALES.nld]: {\n    [LOCALES.dan]: 'Deens',\n    [LOCALES.deu]: 'Duits',\n    [LOCALES.eng]: 'Engels (Verenigd Koninkrijk)',\n    [LOCALES.epo]: 'Esperanto',\n    [LOCALES.fra]: 'Frans',\n    [LOCALES.fry]: 'Fries (West)',\n    [LOCALES.isl]: 'IJslands',\n    [LOCALES.ita]: 'Italiaans',\n    [LOCALES.nld]: 'Nederlands',\n    [LOCALES.nno]: 'Noors (Nynorsk)',\n    [LOCALES.nob]: 'Noors (Bokm\u00E5l)',\n    [LOCALES.por]: 'Portugees',\n    [LOCALES.spa]: 'Spaans',\n    [LOCALES.swe]: 'Zweeds',\n    [LOCALES.vls]: 'Vlaams',\n\n    'proficiency_name-a1': 'A1: Beginner',\n    'proficiency_description-a1': [\n      'Lezen: Je kunt vertrouwde namen, woorden en zeer eenvoudige zinnen begrijpen, bijvoorbeeld op aankondigingen en posters of in catalogi.',\n      'Schrijven: Je kunt een korte, eenvoudige ansichtkaart schrijven, bijvoorbeeld om vakantiegroeten te sturen. Je kunt formulieren invullen met persoonlijke gegevens, zoals je naam, nationaliteit en adres op een hotelregistratieformulier.',\n    ],\n    'proficiency_example-a1': '\"Hallo! Ik heet Maria. Ik woon in een klein huis in Amsterdam met mijn familie. Ik heb een broer en een zus. Ik hou van appels en peren. Wat is jouw favoriete fruit?\"',\n    'proficiency_name-a2': 'A2: Pre-intermediair',\n    'proficiency_description-a2': [\n      'Lezen: Je kunt zeer korte, eenvoudige teksten lezen. Je kunt specifieke, voorspelbare informatie vinden in eenvoudig alledaags materiaal zoals advertenties, folders, menu\\'s en dienstregelingen, en je kunt korte eenvoudige persoonlijke brieven begrijpen.',\n      'Schrijven: Je kunt korte, eenvoudige notities en berichten schrijven die betrekking hebben op zaken van directe noodzaak. Je kunt een heel eenvoudige persoonlijke brief schrijven, bijvoorbeeld om iemand te bedanken.',\n    ],\n    'proficiency_example-a2': '\"Afgelopen weekend ging ik met mijn vrienden naar het park. We hadden een picknick met broodjes en sap. Het weer was zonnig, en we speelden voetbal. Daarna gingen we naar een caf\u00E9 en aten we ijs. Het was een leuke dag!\"',\n    'proficiency_name-b1': 'B1: Intermediair',\n    'proficiency_description-b1': [\n      'Lezen: Je kunt teksten begrijpen die voornamelijk bestaan uit alledaagse of werkgerelateerde taal met een hoge frequentie. Je kunt de beschrijving van gebeurtenissen, gevoelens en wensen begrijpen in persoonlijke brieven.',\n      'Schrijven: Je kunt eenvoudige, samenhangende teksten schrijven over onderwerpen die vertrouwd of van persoonlijk belang zijn. Je kunt persoonlijke brieven schrijven waarin je ervaringen en indrukken beschrijft.',\n    ],\n    'proficiency_example-b1': '\"Ik lees graag boeken, vooral detectiveverhalen. Onlangs heb ik een verhaal gelezen over een rechercheur die een moeilijk mysterie oploste. Het was erg interessant, en ik kon niet stoppen met lezen. Ik hou van dit genre omdat het me aan het denken zet en ik probeer het einde te raden.\"',\n    'proficiency_name-b2': 'B2: Upper-intermediair',\n    'proficiency_description-b2': [\n      'Lezen: Je kunt artikelen en rapporten lezen die gaan over actuele problemen waarin de schrijvers specifieke houdingen of standpunten innemen. Je kunt eigentijdse literaire proza begrijpen.',\n      'Schrijven: Je kunt duidelijke, gedetailleerde teksten schrijven over een breed scala aan onderwerpen die verband houden met je interesses. Je kunt een essay of rapport schrijven waarin je informatie doorgeeft of redenen geeft ter ondersteuning of afwijzing van een bepaald standpunt. Je kunt brieven schrijven waarin je de persoonlijke betekenis van gebeurtenissen en ervaringen benadrukt.',\n    ],\n    'proficiency_example-b2': '\"Het concept van thuiswerken is de laatste jaren steeds populairder geworden. Het biedt flexibiliteit en gemak voor werknemers, waardoor ze overal kunnen werken. Maar het brengt ook uitdagingen met zich mee, zoals het behouden van productiviteit en communicatie met collega\\'s. Over het algemeen denk ik dat de voordelen groter zijn dan de nadelen.\"',\n    'proficiency_name-c1': 'C1: Gevorderd',\n    'proficiency_description-c1': [\n      'Lezen: Je kunt lange en complexe feitelijke en literaire teksten begrijpen en waarderen, waarbij je onderscheid maakt in stijl. Je kunt gespecialiseerde artikelen en langere technische instructies begrijpen, zelfs wanneer deze niet in je vakgebied liggen.',\n      'Schrijven: Je kunt jezelf duidelijk en goed gestructureerd uitdrukken in tekst, waarbij je standpunten uitvoerig uiteenzet. Je kunt schrijven over complexe onderwerpen in een brief, essay of rapport, en daarbij benadrukken wat je als de belangrijkste kwesties beschouwt. Je kunt een stijl kiezen die geschikt is voor de beoogde lezer.',\n    ],\n    'proficiency_example-c1': '\"Klimaatverandering is een van de meest urgente problemen van deze tijd. Hoewel hernieuwbare energiebronnen zoals wind- en zonne-energie steeds belangrijker worden, blijft de overgang van fossiele brandstoffen een grote uitdaging. Overheden moeten samenwerken met industrie\u00EBn en gemeenschappen om duurzame beleidsmaatregelen te cre\u00EBren die economische groei en milieubescherming in balans brengen.\"',\n    'proficiency_name-c2': 'C2: Proficient',\n    'proficiency_description-c2': [\n      'Lezen: Je kunt vrijwel alle vormen van geschreven taal met gemak lezen, inclusief abstracte, structureel of taalkundig complexe teksten zoals handleidingen, gespecialiseerde artikelen en literaire werken.',\n      'Schrijven: Je kunt heldere, vloeiende teksten schrijven in een passende stijl. Je kunt complexe brieven, rapporten of artikelen schrijven die een zaak presenteren met een effectieve logische structuur die de ontvanger helpt belangrijke punten op te merken en te onthouden. Je kunt samenvattingen en recensies schrijven van professionele of literaire werken.',\n    ],\n    'proficiency_example-c2': '\"De nuances van taalontwikkeling onthullen veel over culturele en maatschappelijke veranderingen door de tijd heen. Zo duidt de opname van leenwoorden vaak op een periode van culturele uitwisseling of invloed. Het analyseren van dergelijke patronen verrijkt niet alleen ons begrip van taalontwikkeling, maar biedt ook waardevolle inzichten in historische relaties tussen beschavingen. Deze dynamiek benadrukt de complexiteit en verbondenheid van menselijke communicatie.\"',\n\n    'prompt-context': 'Je bent een expert in en docent van het {%t:{%s:targetLocale%}%}. De gebruiker is {%t:{%s:targetLocale%}%} aan het studeren. De gebruiker beheerst de taal al tot CEFR niveau {%s:proficiencyLevel%}. Dit betekend dat de gebruiker al de volgende vaardigheden beheerst: \"{%t:proficiency_description-{%s:proficiencyLevel%}%}\" Maar de gebruiker wil de taal nog beter leren beheersen.',\n    'prompt-comprehension': 'Schrijf een lees en schrijfvaardigheidsoefening waarbij de gebruiker een tekst in het {%t:{%s:targetLocale%}%} krijgt samen met een vraag in het {%t:{%s:sourceLocale%}%} over de tekst waarop de gebruiker moet antwoorden in het {%t:{%s:targetLocale%}%}. Geef geen verdere instructies, uitleg of het antwoord aan de gebruiker. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten.',\n    'prompt-comprehension-follow_up': 'Geef feedback op de lees en schrijfvaardigheidsoefening die gesteld is. Geef beknopt feedback over het {%t:{%s:targetLocale%}%} met veel diepgang dat duidelijk genoeg is voor het kennis niveau van de gebruiker. Schrijf de feedback in het {%t:{%s:sourceLocale%}%}. Richt je hierbij uitsluitend op taalkundige aspecten en negeer inhoudelijke evaluaties of interpretaties van het bericht. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten.',\n    'prompt-conversation': 'Je gaat met de gebruiker een gesprek simuleren in het {%t:{%s:targetLocale%}%}. Geef geen verdere instructies of uitleg aan de gebruiker. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten. Schrijf het eerste bericht in een gesprek dat al gelijk een onderwerp introduceert om het over te hebben.',\n    'prompt-conversation-follow_up': 'Je bent met de gebruiker een gesprek aan het simuleren in het {%t:{%s:targetLocale%}%}. Geef als antwoord op een bericht eerst beknopt feedback met veel diepgang dat duidelijk genoeg is voor het kennis niveau van de gebruiker in het {%t:{%s:sourceLocale%}%}. Richt je hierbij uitsluitend op taalkundige aspecten en negeer inhoudelijke evaluaties of interpretaties van het bericht. Ga daarna verder met het antwoorden op het bericht in het {%t:{%s:targetLocale%}%}. Geef geen verdere instructies of uitleg aan de gebruiker. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten.',\n    'prompt-clarification': 'De gebruiker heeft onderstaande vraag, beantwoord de vraag beknopt met veel diepgang dat duidelijk genoeg is voor het kennis niveau van de gebruiker. Beantwoord de vraag in het {%t:{%s:sourceLocale%}%} geef voorbeelden in het {%t:{%s:targetLocale%}%} waar nodig. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten. Beantwoord de vraag niet als het absoluut niet taal gerelateerd is.',\n    'prompt-reading': 'Schrijf een tekst in {%t:{%s:targetLocale%}%}, maar schrijf na elke geschreven alinea dezelfde alinea eronder in {%t:{%s:sourceLocale%}%}. Geef geen inhoud weer die betrekking heeft op het leerproces van de gebruiker. Zorg voor het maken van een leuke tekst om het lezen mee te oefenen. Schrijf altijd in platte tekst zonder opmaak, labels of kopjes.',\n    'prompt-reading-topic': 'De gegenereerde tekst moet over het volgende onderwerp gaan:',\n    'prompt-rewrite': 'Herschrijf de door de gebruiker verstrekte tekst in {%t:{%s:targetLocale%}%} op het CEFR-niveau {%s:proficiencyLevel%}. Zorg ervoor dat er geen informatie verloren gaat tijdens het vertalen. Schrijf altijd in platte tekst zonder extra commentaar.',\n    'prompt-story': 'Jij en de gebruiker gaan samen een verhaal schrijven door om de beurt een gedeelte toe te voegen. Begin met het schrijven van de eerste sectie van het verhaal in {%t:{%s:targetLocale%}%}, waarin je een boeiend thema of een interessante setting introduceert. Richt je op plezier hebben en het oefenen van de taal. Voeg geen extra instructies, uitleg, opmaak, labels of koppen toe.',\n    'prompt-story-follow_up': 'Je zet de gezamenlijke sessie voor het schrijven van een verhaal met de gebruiker voort. Geef eerst korte, diepgaande feedback in {%t:{%s:sourceLocale%}%} op de laatste bijdrage van de gebruiker, waarbij je je uitsluitend richt op taalkundige aspecten en suggesties voor verbetering geeft. Maak geen opmerkingen over de plot, logica of inhoud van het verhaal. Voeg daarna jouw volgende gedeelte van het verhaal toe in {%t:{%s:targetLocale%}%}. Schrijf je antwoord in platte tekst zonder opmaak, labels of koppen.',\n    'prompt-topic': ' Verwerk het volgende onderwerp in jouw bericht \"{%topic%}\".',\n    'prompt-vocabulary': 'Schrijf een woord in het {%t:{%s:targetLocale%}%} samen met de definitie in het {%t:{%s:sourceLocale%}%}. De gebruiker zal vervolgens een zin in het {%t:{%s:targetLocale%}%} schrijven waarin dit woord verwerkt moeten worden. Hou hierbij rekening met de vaardigheid en taalniveau van de gebruiker. Geef geen verdere instructies, uitleg of het antwoord aan de gebruiker. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten.',\n    'prompt-vocabulary-follow_up': 'Geef feedback op de zin waarmee de gebruik antwoord heeft gegeven. Controleer of de woord juist gebruikt is in de zin. Geef beknopt feedback over het {%t:{%s:targetLocale%}%} met veel diepgang dat duidelijk genoeg is voor het kennis niveau van de gebruiker. Schrijf de feedback in het {%t:{%s:sourceLocale%}%}. Richt je hierbij uitsluitend op taalkundige aspecten en negeer inhoudelijke evaluaties of interpretaties van het bericht. Schrijf altijd in platte tekst zonder enige opmaak, labels, kopteksten of lijsten.',\n\n    'prompt-translate': 'De gebruiker heeft een vertaling van de geselecteerde tekst aangevraagd. Vertaal alle {%t:{%s:sourceLocale%}%} naar {%t:{%s:targetLocale%}%} en {%t:{%s:targetLocale%}%} naar {%t:{%s:sourceLocale%}%}. Geef de gebruiker geen verdere instructies of uitleg. Schrijf altijd in platte tekst zonder opmaak, labels, kopjes of lijsten.',\n    'prompt-translate-user': 'Vertaal de geselecteerde tekst in {%t:{%s:sourceLocale%}%}. De gebruiker heeft de volgende tekst geselecteerd: \"{%s:selection.text%}\".',\n    'prompt-translate-context': 'Deze is geselecteerd uit de context: \"{%s:selection.context%}\". Let op vertaal niet de context, maar alleen de selectie.',\n    'prompt-explain': 'De gebruiker heeft een uitleg van de tekst aangevraagd. Ga diep in op alle details van de tekst en geef een duidelijke en beknopte uitleg. Geef aanvullende voorbeelden als dit past bij de uitleg. Schrijf altijd in platte tekst zonder opmaak, labels, kopjes of lijsten.',\n    'prompt-explain-user': 'Leg de geselecteerde tekst uit in {%t:{%s:sourceLocale%}%}. De gebruiker heeft de volgende tekst geselecteerd: \"{%s:selection.text%}\".',\n    'prompt-explain-context': 'Deze is geselecteerd uit de context: \"{%s:selection.context%}\". Let op leg niet niet de context uit, maar alleen de selectie.',\n\n    'greeting': 'Hoi!',\n    'credits-link': 'Gemaakt door {%name%}',\n\n    'button-answer': 'Antwoorden',\n    'button-ask': 'Vragen',\n    'button-close': 'Sluiten',\n    'button-generate': 'Genereren',\n    'button-go_back': 'Ga terug',\n    'button-reload': 'Herladen',\n    'button-reply': 'Antwoorden',\n    'button-reset': 'Resetten',\n    'button-rewrite': 'Herschrijven',\n    'context-translate': 'Vertaal selectie',\n    'context-explain': 'Leg selectie uit',\n    'context-copy': 'Kopieer selectie',\n    'select_an_option': 'Selecteer een optie',\n\n    'banner-update_now': 'Er is een update beschikbaar, klik hier om te updaten!',\n\n    'popup-explain': 'Leg de text hieronder uit:',\n    'popup-translate': 'Vertaal de text hieronder:',\n\n    'setup-source_language': 'Dus jij wilt een taal beter beheersen? Laat deze app je helpen met oefenen. We moeten beginnen met een taal te kiezen die je al kent.',\n    'setup-target_language': 'Nu het volgende probleem, welke taal wil je leren?',\n    'setup-proficiency_level': 'Hoe goed zou jij zeggen dat je al in de taal bent? Zie de uitleg hieronder samen met een voorbeeld tekst om een idee te geven wat voor teksten je kan verwachten.',\n    'setup-topics_of_interest': 'Het is natuurlijk veel leuker als er af en toe een onderwerp voorbij komt wat je interessant vind. Vul daarom hieronder een aantal onderwerpen in die regelmatig terug kunnen komen. Denk hierbij vooral aan enige hobbies of andere interesses. Des te meer des te beter!',\n    'setup-api_provider': 'Om te oefenen wordt gebruik gemaakt van een \"Large Language Model\". Je hebt er vast wel van gehoord, iedereen in de technologie sector houdt maar niet op over de ontwikkelingen in kunstmatige intelligentie. De app maakt dus gebruik van een LLM om de oefening te maken en te beoordelen. Helaas komt de app niet zelf met een eentje, dus moeten we een koppeling maken met een LLM. Met welke aanbieder wil je een koppeling maken?',\n    'setup-api_credentials': 'Nu is de grote vraag nog de sleutel. Deze kun je bij het ontwikkelaars paneel. Er staat waarschijnlijk al bij vermeld dat je deze niet met derden moet delen. Gelukkig stuurt deze app nooit de sleutel door. Vertrouw je het toch niet? Bekijk dan de brondcode van deze app, of wacht wellicht tot er een variant gemaakt is waarbij dat niet meer nodig is.',\n    'setup-test_api_credentials': 'Sleutel testen',\n    'setup-api_credentials_untested': 'Test de gegevens eerst voordat je verder gaat.',\n    'setup-api_credentials_tested': 'De opgegeven sleutel werkt, nu kan je nog kiezen uit welke \"Large Language Model\" je wilt gebruiken. Heb je geen idee wat de verschillen zijn? Geen probleem, we raden aan dat je \"{%preferredModel%}\" selecteert, daarmee komt het vast wel goed.',\n    'setup-outro': 'Heel veel succes en plezier!',\n    'setup-next': 'Begin met oefenen',\n\n    'overview-intro': 'Wat wil je gaan doen?',\n    'overview-clarification-description': 'Krijg verduidelijk over het {%t:{%s:targetLanguage%}%}, bijvoorbeeld een grammatica regel zoals vervoegingen en naamvallen.',\n    'overview-clarification-title': 'Vraag om uitleg',\n    'overview-comprehension-description': 'Je krijgt een korte tekst samen met een vraag die je kan beantwoorden.',\n    'overview-comprehension-title': 'Beantwoord vragen',\n    'overview-conversation-description': 'Er zal een kort gesprekje gespeeld worden over bijvoorbeeld het bestellen van eten of over een hobby.',\n    'overview-conversation-title': 'Oefen gesprekken',\n    'overview-migrate-description': 'Exporteer, importeer of reset uw gegevens.',\n    'overview-migrate-title': 'Gegevens beheren',\n    'overview-options-description': 'Pas aan welke taal je wilt leren, welke onderwerpen je interessant vind of welke LLM gebruikt wordt.',\n    'overview-options-title': 'Pas instellingen aan',\n    'overview-reading-description': 'Je kunt een tekst genereren waarbij elke alinea in beide talen beschikbaar is.',\n    'overview-reading-title': 'Lees teksten',\n    'overview-rewrite-description': 'Je kunt de LLM een tekst laten herschrijven in {%t:{%s:targetLanguage%}%} op jouw vaardigheidsniveau.',\n    'overview-rewrite-title': 'Teksten herschrijven',\n    'overview-story-description': 'Je gaat omste beurten stukje voor stukje een verhaal schrijven.',\n    'overview-story-title': 'Schrijf een verhaal',\n    'overview-vocabulary-description': 'Je krijgt een woord samen met de definitie ervan vervolgens schrijf je een zin dat dit woord gebruikt.',\n    'overview-vocabulary-title': 'Leer woorden',\n\n    'options-source_language': 'Welke taal ken je al?',\n    'options-target_language': 'Welke taal wil je leren?',\n    'options-proficiency_level': 'Hoe vaardig ben je al in de taal? Zie de uitleg hieronder samen met een voorbeeld tekst om een idee te geven wat voor teksten je kan verwachten.',\n    'options-topics_of_interest': 'Vul hieronder een aantal onderwerpen in die regelmatig terug kunnen komen in de oefening.',\n    'options-api_provider': 'Om te oefenen wordt gebruik gemaakt van een \"Large Language Model\" om de oefening te maken en te beoordelen. Met welke aanbieder wil je een koppeling maken?',\n    'options-api_credentials': 'Voer de sleutel uit het ontwikkelaars paneel in.',\n    'options-test_api_credentials': 'Sleutel testen',\n    'options-api_credentials_untested': 'Test de gegevens eerst voordat je verder gaat.',\n    'options-api_credentials_tested': 'De opgegeven sleutel werkt. Kies een \"Large Language Model\" dat je wilt gebruiken, wij raden \"{%preferredModel%}\" aan.',\n\n    'migrate-export': 'Exporteer de gegevens die de app heeft opgeslagen. Het is belangrijk op te merken dat de export niet de API-sleutel bevat die wordt gebruikt om toegang te krijgen tot een LLM-provider. Bij het importeren van gegevens moet deze opnieuw worden toegepast.',\n    'migrate-export_button': 'Download uw gegevens',\n    'migrate-import': 'Importeer eerder ge\u00EBxporteerde gegevens. Eenmaal ge\u00EFmporteerd, kan het niet ongedaan worden gemaakt, dus wees voorzichtig! Het wordt aanbevolen om uw bestaande gegevens te exporteren voordat u ze overschrijft met een nieuwe import. Na een succesvolle import wordt u teruggebracht naar het instellingenscherm met de toegepaste import.',\n    'migrate-import_button': 'Upload uw gegevens',\n    'migrate-reset': 'Verwijder alle gegevens en reset de app. Eenmaal uitgevoerd kan deze actie niet ongedaan worden gemaakt.',\n    'migrate-reset_button': 'Reset',\n    'migrate-reset_button-confirmation': 'Ik bevestig dat ik absoluut zeker ben dat ik wil resetten!',\n\n    'statistics-activity_per_category': ' Je hebt al {%s:statisticReadingActivity%} teksten gelezen, {%s:statisticRewriteActivity%} teksten laten herschrijven, {%s:statisticComprehensionActivity%} vragen beantwoord, {%s:statisticVocabularyActivity%} woorden geoefened, {%s:statisticConversationActivity%} berichten verstuurd, {%s:statisticStoryActivity%} verhalen verteld en {%s:statisticClarificationActivity%} vragen gesteld.',\n    'statistics-no_activity': 'Je hebt helaas nog niet genoeg activiteiten gedaan om hier weer te geven. Ga naar het overzicht en kies een oefening om te beginnen, op de achtergrond zal bijgehouden worden hoeveel je er al voltooid hebt.',\n    'statistics-no_activity_streak': 'Op dit moment heb je geen lopende activiteitenreeks opgebouwd. Deze krijg je door op meerdere dagen op een rij minimaal \u00E9\u00E9n oefening te doen.',\n    'statistics-current_activity_streak': 'Op dit moment is jouw activiteitenreeks {%s:statisticCurrentActivityStreak%} dagen lang. Verlies het niet en zorg ervoor dat je voor middernacht oefend!',\n    'statistics-extended_activity_streak': 'Goed gedaan, je hebt jouw reeks voor vandaag verlengt! Op dit moment is jouw activiteitenreeks {%s:statisticCurrentActivityStreak%} dagen lang.',\n    'statistics-longest_activity_streak': ' Jouw langste activiteitenreeks ooit was {%s:statisticLongestActivityStreak%} dagen lang.',\n\n    'clarification-intro': 'Waar wil je meer over weten?',\n    'clarification-placeholder': 'Ik vraag mij af...',\n    'comprehension-intro': 'Je leest straks een tekst in het {%t:{%s:targetLanguage%}%} samen met een vraag erover, beantwoord de vraag in het {%t:{%s:targetLanguage%}%}. Vervolgens zal je enige verbeterpunten krijgen over jouw antwoord.',\n    'conversation-intro': 'Je gaat straks een gesprek simuleren in het {%t:{%s:targetLanguage%}%} zorg daarom dat je ook altijd in het {%t:{%s:targetLanguage%}%} antwoord. Tussendoor zal je enige verbeterpunten kunnen ontvangen.',\n    'reading-intro': 'Je zult een tekst lezen waarbij elke alinea zowel in {%t:{%s:targetLanguage%}%} als in {%t:{%s:sourceLanguage%}%} is geschreven, waardoor je je leesvaardigheid kunt oefenen. Je kunt optioneel een onderwerp opgeven waar de tekst over moet gaan.',\n    'reading-placeholder': 'Ik wil lezen over...',\n    'rewrite-intro': 'Je kunt hieronder een tekst invoeren. De LLM zorgt ervoor dat de tekst in {%t:{%s:sourceLanguage%}%} is op jouw geselecteerde vaardigheidsniveau.',\n    'rewrite-placeholder': 'Ik wil laten herschrijven...',\n    'story-intro': 'Je gaat straks een verhaal schrijven in het {%t:{%s:targetLanguage%}%} waarbij je omste beurten een stuk toevoegd. Maak je geen zorgen of het verhaal een goed, logisch en gegrond verhaal is, maar zorg vooral dat je de taal oefened. Zorg daarom dat je ook altijd in het {%t:{%s:targetLanguage%}%} antwoord. Tussendoor zal je enige verbeterpunten kunnen ontvangen.',\n    'vocabulary-intro': 'Je leest straks een woord samen met de definitie ervan in het {%t:{%s:targetLanguage%}%}. Antwoord met een zin waar het woord ingebruikt wordt in het {%t:{%s:targetLanguage%}%}. Vervolgens zal je enige verbeterpunten krijgen over jouw antwoord.',\n  },\n})\n\nexport const TRANSLATABLE_CODES = Object.keys(TRANSLATIONS)\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\nimport {\n  translate as t,\n} from '../../data/translations'\nimport { createMessage } from '../../apis/apis'\n\nconst removeContextMenu = (\n  event,\n  state,\n) => {\n  event.preventDefault()\n\n  state.contextMenu = null\n  state.selection = null\n}\n\nconst handleBack = (\n  event,\n  state,\n) => {\n  window.history.back()\n  removeContextMenu(event, state)\n}\n\nconst handleCopy = (\n  event,\n  state,\n) => {\n  navigator.clipboard.writeText(\n    state.selection.text,\n  )\n  removeContextMenu(event, state)\n}\n\nconst handleExplain = (\n  event,\n  state,\n) => {\n  state.popupModal = {\n    messages: [{\n      role: 'user',\n      content: (\n        t(state, 'popup-explain')\n        + \"\\r\\n\\r\\n\"\n        + state.selection.text\n      ),\n    }],\n    pending: true,\n  }\n\n  createMessage(\n    state,\n    [{\n      role: 'user',\n      content: t(state, 'prompt-explain-user'),\n    }, ...(\n      state.selection.text === state.selection.context\n        ? []\n        : [{\n          role: 'context',\n          content: t(state, 'prompt-explain-context'),\n        }]\n    )],\n    t(state, 'prompt-context'),\n    t(state, 'prompt-explain'),\n  ).then(([error, _response, result]) => {\n    state.popupModal.pending = false\n    if (error) {\n      state.popupModal.error = error.toString()\n      return\n    }\n    state.popupModal.messages.push(result)\n  })\n\n  removeContextMenu(event, state)\n}\n\nconst handleReload = (\n  event,\n  state,\n) => {\n  window.location.reload()\n  removeContextMenu(event, state)\n}\n\nconst handleTranslate = (\n  event,\n  state,\n) => {\n  state.popupModal = {\n    messages: [{\n      role: 'user',\n      content: (\n        t(state, 'popup-translate')\n        + \"\\r\\n\\r\\n\"\n        + state.selection.text\n      ),\n    }],\n    pending: true,\n  }\n\n  createMessage(\n    state,\n    [{\n      role: 'user',\n      content: t(state, 'prompt-translate-user'),\n    }, ...(\n      state.selection.text === state.selection.context\n        ? []\n        : [{\n          role: 'context',\n          content: t(state, 'prompt-translate-context'),\n        }]\n    )],\n    t(state, 'prompt-context'),\n    t(state, 'prompt-translate'),\n  ).then(([error, _response, result]) => {\n    state.popupModal.pending = false\n    if (error) {\n      state.popupModal.error = error.toString()\n      return\n    }\n    state.popupModal.messages.push(result)\n  })\n\n  removeContextMenu(event, state)\n}\n\nexport const contextMenu = (\n  state,\n) => c(\n  state.contextMenu && state.selection,\n  () => {\n    let top = state.contextMenu.pointerY <= (window.innerHeight / 2)\n    let left = state.contextMenu.pointerX <= (window.innerWidth / 2)\n    let anchor = (\n      top\n        ? 'Top'\n        : 'Bottom'\n    ) + (\n        left\n          ? 'Left'\n          : 'Right'\n      )\n\n    return n('div', {\n      class: 'context-menu',\n      style: {\n        ['border' + anchor + 'Radius']: '0',\n        ...(\n          left\n            ? {\n              left: state.contextMenu.pointerX + 'px',\n            }\n            : {\n              right: (window.innerWidth - state.contextMenu.pointerX + 'px'),\n            }\n        ),\n        ...(\n          top\n            ? {\n              top: state.contextMenu.pointerY + 'px',\n            }\n            : {\n              bottom: (window.innerHeight - state.contextMenu.pointerY + 'px'),\n            }\n        )\n      }\n    }, [\n      ...c(\n        state.selection.text.length > 0,\n        [\n          n('button', {\n            click: handleCopy,\n          }, t(state, 'context-copy')),\n\n          n('button', {\n            click: handleTranslate,\n          }, t(state, 'context-translate')),\n\n          n('button', {\n            click: handleExplain,\n          }, t(state, 'context-explain')),\n\n          n('div', {\n            class: 'margin',\n          }),\n        ],\n      ),\n\n      n('button', {\n        disabled: !window.history.length,\n        click: handleBack,\n      }, t(state, 'button-go_back')),\n\n      n('button', {\n        click: handleReload,\n      }, t(state, 'button-reload')),\n    ])\n  }\n)\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\nimport {\n  translate as t,\n} from '../../data/translations'\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  state.popupModal = null\n}\n\nexport const popupModal = (\n  state,\n) => c(\n  state.popupModal,\n  () => n('div', {\n    class: 'popup-modal',\n  }, [\n    ...c(\n      state.popupModal.messages\n      && state.popupModal.messages.length > 0,\n      n('div', {\n        class: 'messages',\n      }, state.popupModal.messages.map(\n        (message) => n('p', {\n          class: 'message-' + message?.role\n        }, message?.content?.split('\\n')?.flatMap(\n          (content, index, results) =>\n            index === results.length - 1 ? [content] : [content, n('br')]\n        )),\n      )),\n    ),\n\n    ...c(\n      state.popupModal.error,\n      n('p', state.popupModal.error),\n    ),\n\n    ...c(\n      state.popupModal.pending,\n      n('p', {\n        class: 'pending',\n      }),\n    ),\n\n    n('button', {\n      type: 'button',\n      click: handleBack,\n    }, t(state, 'button-close')),\n  ]),\n)\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { translate as t } from '../../data/translations.js'\n\nconst handleClick = (\n) => {\n  window.location.reload()\n}\n\nexport const updateBanner = (\n  state,\n) => c(\n  state.appUpdateAvailable,\n  () => [\n    n('button', {\n      click: handleClick,\n    }, t(state, 'banner-update_now')),\n\n    n('div', {\n      class: 'margin',\n    }),\n  ],\n)\n", "import { SCREENS } from '../data/screens.js'\n\nconst screenOptions = Object.values(SCREENS)\n\nexport const setScreen = (\n  state,\n  screen,\n) => {\n  if (\n    screen\n    && state.screen !== screen\n    && screenOptions.includes(screen)\n  ) {\n    // Only story history state if not originating from the setup.\n    if (state.screen !== SCREENS.setup) {\n      // Push the new screen state to the history API\n      window.history.pushState({\n        screen: screen,\n      }, '', '?screen=' + screen)\n    }\n\n    state.screen = screen\n  }\n}\n\n// Listen for history changes and update the screen accordingly.\nexport const handleHistory = (\n  state,\n) => {\n  window.addEventListener('popstate', (\n    event,\n  ) => {\n    const screen = (\n      event.state\n      && event.state.screen\n    )\n    // Don't allow the user to go back to the setup screen.\n    if (screen === SCREENS.setup) {\n      return false\n    }\n\n    if (\n      screen\n      && state.screen !== screen\n      && screenOptions.includes(screen)\n    ) {\n      state.screen = screen\n    }\n  })\n}\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { SCREENS } from '../data/screens.js'\nimport { STORAGE_KEY } from '../data/state.js'\nimport {\n  translate as t,\n} from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\n\nconst EXCLUDED_KEYS = [\n  'screen',\n\n  'appUpdateAvailable',\n  'migrateImportError',\n\n  'apiCredentials',\n  'apiCredentialsError',\n  'apiCredentialsPending',\n  'apiCredentialsTested',\n]\n\nconst handleExport = (\n  _event,\n  state,\n) => {\n  // Returns a stringified version of the state excluding certain keys.\n  const filtered = {}\n  for (const key in state) {\n    if (!EXCLUDED_KEYS.includes(key)) {\n      filtered[key] = state[key]\n    }\n  }\n\n  // Triggers a file download with the exported state.\n  const data = JSON.stringify(filtered)\n  const blob = new Blob([data], {\n    type: 'application/json',\n  })\n  const url = URL.createObjectURL(blob)\n  const downloadLink = document.createElement('a')\n  downloadLink.href = url\n  downloadLink.download = 'toaln_export-' + (new Date()).toISOString() + '.json'\n  document.body.appendChild(downloadLink)\n  downloadLink.click()\n  document.body.removeChild(downloadLink)\n  URL.revokeObjectURL(url)\n}\n\n// Reads the selected file and updates the state.\nconst handleImport = (\n  _event,\n  state,\n) => {\n  const input = document.createElement('input')\n  input.setAttribute('accept', 'application/json')\n  input.setAttribute('hidden', true)\n  input.setAttribute('type', 'file')\n  input.addEventListener('change', (\n    event,\n  ) => {\n    const file = event.target.files[0]\n\n    if (file) {\n      const reader = new FileReader()\n      reader.addEventListener('error', () => {\n        state.migrateImportError = 'Error reading file.'\n      })\n      reader.addEventListener('load', () => {\n        try {\n          const imported = JSON.parse(reader.result)\n          // Remove excluded keys from the imported state.\n          for (const key of EXCLUDED_KEYS) {\n            delete imported[key]\n          }\n          Object.assign(state, imported)\n          // Reset excluded keys back to default.\n          for (const key of EXCLUDED_KEYS) {\n            delete state[key]\n          }\n        } catch (error) {\n          state.migrateImportError = error.toString()\n        }\n\n        // Clear history api state.\n        window.history.replaceState(\n          null,\n          '',\n          window.location.pathname\n          + window.location.search\n        )\n\n        // Refresh the page for the changes to take effect.\n        window.location.reload()\n      })\n      reader.readAsText(file)\n    }\n\n    input.remove()\n\n    setScreen(state, SCREENS.setup)\n  })\n\n  document.body.appendChild(input)\n  input.click()\n}\n\n// Handles resetting of the state.\nconst handleReset = (\n  _event,\n  state,\n) => {\n  if (!state.migrateReset) {\n    state.migrateReset = true\n    return\n  }\n\n  window.localStorage.setItem(STORAGE_KEY, null)\n  window.location.reload()\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  state.migrateReset = false\n  setScreen(state, SCREENS.overview)\n}\n\nexport const migrate = (\n  state,\n) => [\n    n('b', t(state, 'greeting')),\n\n    n('p', t(state, 'migrate-export')),\n    n('button', {\n      click: handleExport,\n      type: 'button',\n    }, t(state, 'migrate-export_button')),\n\n    n('p', t(state, 'migrate-import')),\n    n('button', {\n      click: handleImport,\n      type: 'button',\n    }, t(state, 'migrate-import_button')),\n    ...c(\n      state.migrateImportError,\n      n('p', {}, state.migrateImportError),\n    ),\n\n    n('p', t(state, 'migrate-reset')),\n    n('button', {\n      click: handleReset,\n      type: 'button',\n    }, c(\n      state.migrateReset,\n      t(state, 'migrate-reset_button-confirmation'),\n      t(state, 'migrate-reset_button')\n    )),\n\n    n('button', {\n      click: handleBack,\n      type: 'button',\n    }, t(state, 'button-go_back')),\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport {\n  APIS,\n  getModels,\n  isReady,\n} from '../apis/apis.js'\n\nimport {\n  getLanguageFromLocale,\n  LOCALE_CODES,\n  PROFICIENCY_LEVEL_CODES,\n  setLangAttribute,\n} from '../data/locales.js'\nimport { SCREENS } from '../data/screens.js'\nimport {\n  translate as t,\n  TRANSLATABLE_CODES,\n} from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\n\nconst handleSourceLanguage = (\n  event,\n  state,\n) => {\n  if (state.sourceLocale !== event.target.selectedOptions[0].value) {\n    state.sourceLocale = event.target.selectedOptions[0].value\n    state.sourceLanguage = getLanguageFromLocale(state.sourceLocale)\n    setLangAttribute(state)\n  }\n}\n\nconst handleTargetLanguage = (\n  event,\n  state,\n) => {\n  if (state.targetLocale !== event.target.selectedOptions[0].value) {\n    state.targetLocale = event.target.selectedOptions[0].value\n    state.targetLanguage = getLanguageFromLocale(state.targetLocale)\n  }\n}\n\nconst handleProficiencyLevel = (\n  event,\n  state,\n) => {\n  if (state.proficiencyLevel !== event.target.selectedOptions[0].value) {\n    state.proficiencyLevel = event.target.selectedOptions[0].value\n  }\n}\n\nconst handleNewTopic = (\n  event,\n  state,\n) => {\n  if (event.target.value) {\n    state.topicsOfInterest.push(event.target.value)\n  }\n}\n\nconst handleApiProvider = (\n  event,\n  state,\n) => {\n  if (state.apiProvider !== event.target.selectedOptions[0].value) {\n    state.apiProvider = event.target.selectedOptions[0].value\n    state.apiCredentialsTested = false\n  }\n}\n\nconst handleApiCredentials = (\n  event,\n  state,\n) => {\n  if (state.apiCredentials !== event.target.value) {\n    state.apiCredentials = event.target.value\n  }\n}\n\nconst handleApiCredentialsTest = (\n  _event,\n  state,\n) => {\n  state.apiCredentialsPending = true\n  getModels(state)\n    .then(([error, , result]) => {\n      state.apiCredentialsPending = false\n\n      if (error) {\n        state.apiCredentialsTested = false\n        state.apiCredentialsError = error.toString()\n        state.apiModels = null\n      } else {\n        state.apiCredentialsTested = true\n        state.apiCredentialsError = false\n        state.apiModels = result\n      }\n    })\n}\n\nconst handleApiModel = (\n  event,\n  state,\n) => {\n  if (state.apiModel !== event.target.selectedOptions[0].value) {\n    state.apiModel = event.target.selectedOptions[0].value\n  }\n}\n\nconst handleGoBack = (\n  _event,\n  state,\n) => {\n  if (isReady(state)) {\n    setScreen(state, SCREENS.overview)\n  }\n}\n\nexport const options = (\n  state,\n) => [\n    n('b', t(state, 'greeting')),\n\n    n('label', {\n      for: 'select_source_language',\n    }, t(state, 'options-source_language')),\n    n('select', {\n      id: 'select_source_language',\n      change: handleSourceLanguage,\n    }, TRANSLATABLE_CODES.map(\n      localeCode => n('option', {\n        selected: (state.sourceLocale === localeCode ? 'selected' : false),\n        value: localeCode,\n      }, t(state, localeCode, localeCode))\n    )),\n\n    n('label', {\n      for: 'select_target_language',\n    }, t(state, 'options-target_language')),\n    n('select', {\n      id: 'select_target_language',\n      change: handleTargetLanguage,\n    }, LOCALE_CODES.map(\n      localeCode => n('option', {\n        selected: (state.targetLocale === localeCode ? 'selected' : false),\n        value: localeCode,\n      }, t(state, localeCode))\n    )),\n\n    n('label', {\n      for: 'select_proficiency_level',\n    }, t(state, 'options-proficiency_level')),\n    n('select', {\n      id: 'select_proficiency_level',\n      change: handleProficiencyLevel,\n    }, PROFICIENCY_LEVEL_CODES.map(\n      proficiencyLevel => n('option', {\n        selected: (state.proficiencyLevel === proficiencyLevel ? 'selected' : false),\n        value: proficiencyLevel,\n      }, t(state, 'proficiency_name-' + proficiencyLevel))\n    )),\n\n    n('ul', t(state, 'proficiency_description-' + state.proficiencyLevel).map(text => n('li', text))),\n    n('blockquote',\n      n('p', c(\n        TRANSLATABLE_CODES.includes(state.targetLocale),\n        t(state, 'proficiency_example-' + state.proficiencyLevel, state.targetLocale),\n        t(state, 'proficiency_example-' + state.proficiencyLevel)\n      ))\n    ),\n\n    n('label', {\n      for: 'input_topics_of_interest',\n    }, t(state, 'options-topics_of_interest')),\n    ...state.topicsOfInterest.map((topic, index) =>\n      n('input', {\n        keyup: (event) => {\n          if (!event.target.value) {\n            state.topicsOfInterest.splice(index, 1)\n          } else {\n            state.topicsOfInterest[index] = event.target.value\n          }\n        },\n        value: topic,\n      })\n    ),\n    n('input', {\n      keyup: handleNewTopic,\n      id: 'input_topics_of_interest',\n    }),\n\n    n('label', {\n      for: 'select_api_provider',\n    }, t(state, 'options-api_provider')),\n    n('select', {\n      id: 'select_api_provider',\n      change: handleApiProvider,\n    }, Object.keys(APIS).map(\n      apiProvider => n('option', {\n        selected: (\n          state.apiProvider === apiProvider\n            ? 'selected'\n            : false\n        ),\n        value: apiProvider,\n      }, APIS[apiProvider].name)\n    )),\n\n    ...c(\n      APIS[state.apiProvider]?.requireCredentials,\n      [\n        n('label', {\n          for: 'input-api_credentials',\n        }, t(state, 'options-api_credentials')),\n        n('input', {\n          id: 'input-api_credentials',\n          keyup: handleApiCredentials,\n          type: 'password',\n          value: state.apiCredentials,\n        }),\n      ]\n    ),\n\n    n('button', {\n      click: handleApiCredentialsTest,\n      type: 'button',\n    }, [\n      t(state, 'options-test_api_credentials'),\n      n('span', {\n        class: (\n          state.apiCredentialsPending\n            ? 'pending'\n            : ''\n        )\n      }),\n    ]),\n\n    ...c(\n      state.apiCredentialsError,\n      [n('p', state.apiCredentialsError)]\n    ),\n\n    ...c(\n      !state.apiCredentialsTested,\n      [n('p', t(state, 'options-api_credentials_untested'))],\n      [\n        n('label', {\n          for: 'select_api_model',\n        }, t(state, 'options-api_credentials_tested').replace('{%preferredModel%}', APIS[state.apiProvider]?.preferredModelName ?? APIS[state.apiProvider]?.preferredModel)),\n        n('select', {\n          id: 'select_api_model',\n          change: handleApiModel,\n        }, [\n          n('option', {\n            disabled: true,\n            selected: (\n              !isReady(state)\n                ? 'selected'\n                : false\n            ),\n            value: null,\n          }, t(state, 'select_an_option')),\n          ...state.apiModels?.data\n            ?.filter(APIS[state.apiProvider].modelOptionsFilter ?? (() => true))\n            ?.sort((a, b) => a.id.localeCompare(b.id))\n            ?.map(model => n('option', {\n              selected: ((state.apiModel ?? APIS[state.apiProvider].preferredModel) === model.id ? 'selected' : false),\n              value: model.id,\n            }, model.name ?? model.id)) ?? []\n        ]),\n      ]\n    ),\n\n    n('button', {\n      click: handleGoBack,\n      disabled: !isReady(state),\n      type: 'button',\n    }, t(state, 'button-go_back'))\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\n\nconst handleClarification = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.clarification)\n}\n\nconst handleComprehension = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.comprehension)\n}\n\nconst handleConversation = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.conversation)\n}\n\nconst handleReading = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.reading)\n}\n\nconst handleRewrite = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.rewrite)\n}\n\nconst handleStory = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.story)\n}\n\nconst handleVocabulary = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.vocabulary)\n}\n\nconst handleOptions = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.options)\n}\n\nconst handleMigrate = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.migrate)\n}\n\nexport const overview = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      ...c(\n        state.statisticComprehensionActivity > 0\n        || state.statisticConversationActivity > 0\n        || state.statisticClarificationActivity > 0\n        || state.statisticReadingActivity > 0\n        || state.statisticStoryActivity > 0\n        || state.statisticVocabularyActivity > 0,\n        t(state, 'statistics-activity_per_category'),\n        t(state, 'statistics-no_activity'),\n      ),\n    ]),\n    n('p', [\n      ...c(\n        state.statisticCurrentActivityStreak > 1\n        && (\n          (new Date(state.statisticLastActivityOn)).toISOString().slice(0, 10) === (new Date()).toISOString().slice(0, 10)\n          || (new Date(state.statisticLastActivityOn)).toISOString().slice(0, 10) === (new Date(new Date().setDate(new Date().getDate() - 1))).toISOString().slice(0, 10)\n        ),\n        [\n          ...c(\n            (new Date(state.statisticLastActivityOn)).toISOString().slice(0, 10) === (new Date()).toISOString().slice(0, 10),\n            t(state, 'statistics-extended_activity_streak'),\n            t(state, 'statistics-current_activity_streak'),\n          ),\n          ...c(\n            state.statisticLongestActivityStreak > state.statisticCurrentActivityStreak,\n            ' ' + t(state, 'statistics-longest_activity_streak'),\n          ),\n        ],\n        [\n          t(state, 'statistics-no_activity_streak'),\n          ...c(\n            state.statisticLongestActivityStreak > 1,\n            ' ' + t(state, 'statistics-longest_activity_streak'),\n          ),\n        ]\n      ),\n      ' ' + t(state, 'overview-intro'),\n    ]),\n\n    n('div', {\n      class: 'vertical-layout',\n    }, [\n      n('button', {\n        class: 'card',\n        click: handleReading,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDCD6'),\n        n('b', t(state, 'overview-reading-title')),\n        n('br'),\n        t(state, 'overview-reading-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleComprehension,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDD8A\uFE0F'),\n        n('b', t(state, 'overview-comprehension-title')),\n        n('br'),\n        t(state, 'overview-comprehension-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleVocabulary,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDD0E'),\n        n('b', t(state, 'overview-vocabulary-title')),\n        n('br'),\n        t(state, 'overview-vocabulary-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleRewrite,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83E\uDD16'),\n        n('b', t(state, 'overview-rewrite-title')),\n        n('br'),\n        t(state, 'overview-rewrite-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleConversation,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDCAC'),\n        n('b', t(state, 'overview-conversation-title')),\n        n('br'),\n        t(state, 'overview-conversation-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleStory,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83C\uDFAD'),\n        n('b', t(state, 'overview-story-title')),\n        n('br'),\n        t(state, 'overview-story-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleClarification,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDE4B'),\n        n('b', t(state, 'overview-clarification-title')),\n        n('br'),\n        t(state, 'overview-clarification-description'),\n      ]),\n\n      n('div', {\n        class: 'margin',\n      }),\n\n      n('button', {\n        class: 'card',\n        click: handleOptions,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\u2699\uFE0F'),\n        n('b', t(state, 'overview-options-title')),\n        n('br'),\n        t(state, 'overview-options-description'),\n      ]),\n\n      n('button', {\n        class: 'card',\n        click: handleMigrate,\n        type: 'button',\n      }, [\n        n('span', {\n          class: 'icon',\n        }, '\uD83D\uDCBE'),\n        n('b', t(state, 'overview-migrate-title')),\n        n('br'),\n        t(state, 'overview-migrate-description'),\n      ]),\n    ]),\n\n    n('p', {\n      class: 'text-right',\n    }, n('a', {\n      href: 'https://rondekker.com/',\n      target: '_blank',\n      rel: 'noopener me',\n    }, t(state, 'credits-link').replace('{%name%}', 'Ron Dekker')))\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport {\n  APIS,\n  getModels,\n  isReady,\n} from '../apis/apis.js'\n\nimport {\n  getLanguageFromLocale,\n  LOCALE_CODES,\n  PROFICIENCY_LEVEL_CODES,\n  setLangAttribute,\n} from '../data/locales.js'\nimport { SCREENS } from '../data/screens.js'\nimport {\n  translate as t,\n  TRANSLATABLE_CODES,\n} from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\n\nconst handleSourceLanguage = (\n  event,\n  state,\n) => {\n  if (state.sourceLocale !== event.target.selectedOptions[0].value) {\n    state.sourceLocale = event.target.selectedOptions[0].value\n    state.sourceLanguage = getLanguageFromLocale(state.sourceLocale)\n    setLangAttribute(state)\n  }\n}\n\nconst handleTargetLanguage = (\n  event,\n  state,\n) => {\n  if (state.targetLocale !== event.target.selectedOptions[0].value) {\n    state.targetLocale = event.target.selectedOptions[0].value\n    state.targetLanguage = getLanguageFromLocale(state.targetLocale)\n  }\n}\n\nconst handleProficiencyLevel = (\n  event,\n  state,\n) => {\n  if (state.proficiencyLevel !== event.target.selectedOptions[0].value) {\n    state.proficiencyLevel = event.target.selectedOptions[0].value\n  }\n}\n\nconst handleNewTopic = (\n  event,\n  state,\n) => {\n  if (event.target.value) {\n    state.topicsOfInterest.push(event.target.value)\n  }\n}\n\nconst handleApiProvider = (\n  event,\n  state,\n) => {\n  if (state.apiProvider !== event.target.selectedOptions[0].value) {\n    state.apiProvider = event.target.selectedOptions[0].value\n    state.apiCredentialsTested = false\n  }\n}\n\nconst handleApiCredentials = (\n  event,\n  state,\n) => {\n  if (state.apiCredentials !== event.target.value) {\n    state.apiCredentials = event.target.value\n  }\n}\n\nconst handleApiCredentialsTest = (\n  _event,\n  state,\n) => {\n  state.apiCredentialsPending = true\n  getModels(state)\n    .then(([error, _response, result]) => {\n      state.apiCredentialsPending = false\n\n      if (error) {\n        state.apiCredentialsTested = false\n        state.apiCredentialsError = error.toString()\n        state.apiModels = null\n      } else {\n        state.apiCredentialsTested = true\n        state.apiCredentialsError = false\n        state.apiModels = result\n        state.apiModel ??= result?.data.length > 0 ? result.data[0].id : null\n      }\n    })\n}\n\nconst handleApiModel = (\n  event,\n  state,\n) => {\n  if (state.apiModel !== event.target.selectedOptions[0].value) {\n    state.apiModel = event.target.selectedOptions[0].value\n  }\n}\n\nconst handleNext = (\n  _event,\n  state,\n) => {\n  if (isReady(state)) {\n    setScreen(state, SCREENS.overview)\n  }\n}\n\nexport const setup = (\n  state,\n) => [\n    n('b', t(state, 'greeting')),\n\n    n('label', {\n      for: 'select_source_language',\n    }, t(state, 'setup-source_language')),\n    n('select', {\n      id: 'select_source_language',\n      change: handleSourceLanguage,\n    }, TRANSLATABLE_CODES.map(\n      localeCode => n('option', {\n        selected: (\n          state.sourceLocale === localeCode\n            ? 'selected'\n            : false\n        ),\n        value: localeCode,\n      }, t(state, localeCode, localeCode))\n    )),\n\n    n('label', {\n      for: 'select_target_language',\n    }, t(state, 'setup-target_language')),\n    n('select', {\n      id: 'select_target_language',\n      change: handleTargetLanguage,\n    }, LOCALE_CODES.map(\n      localeCode => n('option', {\n        selected: (\n          state.targetLocale === localeCode\n            ? 'selected'\n            : false\n        ),\n        value: localeCode,\n      }, t(state, localeCode))\n    )),\n\n    n('label', {\n      for: 'select_proficiency_level',\n    }, t(state, 'setup-proficiency_level')),\n    n('select', {\n      id: 'select_proficiency_level',\n      change: handleProficiencyLevel,\n    }, PROFICIENCY_LEVEL_CODES.map(\n      proficiencyLevel => n('option', {\n        selected: (\n          state.proficiencyLevel === proficiencyLevel\n            ? 'selected'\n            : false\n        ),\n        value: proficiencyLevel,\n      }, t(state, 'proficiency_name-' + proficiencyLevel))\n    )),\n\n    n('ul',\n      t(state, 'proficiency_description-' + state.proficiencyLevel)\n        .map(text => n('li', text))\n    ),\n    n('blockquote',\n      n('p', c(\n        TRANSLATABLE_CODES.includes(state.targetLocale),\n        t(state, 'proficiency_example-' + state.proficiencyLevel, state.targetLocale),\n        t(state, 'proficiency_example-' + state.proficiencyLevel),\n      )),\n    ),\n\n    n('label', {\n      for: 'input_topics_of_interest',\n    }, t(state, 'setup-topics_of_interest')),\n    ...state.topicsOfInterest\n      .map(\n        (topic, index) => n('input', {\n          keyup: (\n            event,\n          ) => {\n            if (!event.target.value) {\n              state.topicsOfInterest.splice(index, 1)\n            } else {\n              state.topicsOfInterest[index] = event.target.value\n            }\n          },\n          value: topic,\n        })\n      ),\n    n('input', {\n      keyup: handleNewTopic,\n      id: 'input_topics_of_interest',\n    }),\n\n    n('label', {\n      for: 'select_api_provider',\n    }, t(state, 'setup-api_provider')),\n    n('select', {\n      id: 'select_api_provider',\n      change: handleApiProvider,\n    }, Object.keys(APIS).map(\n      apiProvider => n('option', {\n        selected: (\n          state.apiProvider === apiProvider\n            ? 'selected'\n            : false\n        ),\n        value: apiProvider,\n      }, APIS[apiProvider].name),\n    )),\n\n    ...c(\n      APIS[state.apiProvider]?.requireCredentials,\n      [\n        n('label', {\n          for: 'input-api_credentials',\n        }, t(state, 'setup-api_credentials')),\n        n('input', {\n          id: 'input-api_credentials',\n          keyup: handleApiCredentials,\n          type: 'password',\n          value: state.apiCredentials,\n        }),\n      ],\n    ),\n\n    n('button', {\n      click: handleApiCredentialsTest,\n      type: 'button',\n    }, [\n      t(state, 'setup-test_api_credentials'),\n      n('span', {\n        class: (\n          state.apiCredentialsPending\n            ? 'pending'\n            : ''\n        ),\n      }),\n    ]),\n\n    ...c(\n      state.apiCredentialsError,\n      [n('p', state.apiCredentialsError),],\n    ),\n\n    ...c(\n      !state.apiCredentialsTested,\n      [n('p', t(state, 'setup-api_credentials_untested')),],\n      [\n        n('label', {\n          for: 'select_api_model',\n        }, t(state, 'setup-api_credentials_tested').replace('{%preferredModel%}', APIS[state.apiProvider]?.preferredModelName ?? APIS[state.apiProvider]?.preferredModel)),\n        n('select', {\n          id: 'select_api_model',\n          change: handleApiModel,\n        }, [\n          n('option', {\n            disabled: true,\n            selected: (\n              !isReady(state)\n                ? 'selected'\n                : false\n            ),\n            value: null,\n          }, t(state, 'select_an_option')),\n\n          ...state.apiModels?.data\n            ?.filter(APIS[state.apiProvider].modelOptionsFilter ?? (() => true))\n            ?.sort((a, b) => a.id.localeCompare(b.id))\n            ?.map(model => n('option', {\n              selected: (\n                (state.apiModel ?? APIS[state.apiProvider].preferredModel) === model.id\n                  ? 'selected'\n                  : false\n              ),\n              value: model.id,\n            }, model.name ?? model.id))\n          ?? []\n        ]),\n      ],\n    ),\n\n    ...c(\n      isReady(state),\n      [n('p', t(state, 'setup-outro')),],\n    ),\n\n    n('button', {\n      click: handleNext,\n      disabled: !isReady(state),\n      type: 'button',\n    }, t(state, 'setup-next'))\n  ]\n", "/**\n * Return true randomly at the given odds.\n * @param {number} odds To chance of getting true. Where one is always and zero is never.\n * @returns {boolean}\n */\nexport const randomBool = (\n  odds,\n) => {\n  odds = Math.abs(odds)\n  return Math.random() < (1 / odds)\n}\n\n/**\n * Returns a random item from the list.\n * @param {Array<T>} items The list to get an item from.\n * @returns {T | null}\n */\nexport const randomItem = (\n  items,\n) => {\n  if (\n    !Array.isArray(items)\n    || items.length === 0\n  ) {\n    return null\n  }\n  const index = Math.floor(Math.random() * items.length)\n  return items[index]\n}\n", "const ONE_HOUR = 60 * 60 * 1000\nconst ONE_DAY = ONE_HOUR * 24\nconst TWO_DAYS = ONE_DAY * 2\nconst GRACE_PERIOD = ONE_HOUR\n\nexport const onActivity = (\n  state,\n) => {\n  const lastActivityOn = new Date(state.statisticLastActivityOn)\n  const lastActivityUTC = Date.UTC(\n    lastActivityOn.getFullYear(),\n    lastActivityOn.getMonth(),\n    lastActivityOn.getDate()\n  )\n\n  const today = new Date()\n  const todayUTC = Date.UTC(\n    today.getFullYear(),\n    today.getMonth(),\n    today.getDate()\n  )\n\n  const deltaTime = (todayUTC - lastActivityUTC)\n\n  if (deltaTime >= (TWO_DAYS + GRACE_PERIOD)) {\n    state.statisticCurrentActivityStreak = 1\n    state.statisticLastActivityOn = today.toISOString()\n  } else if (deltaTime >= ONE_DAY) {\n    state.statisticCurrentActivityStreak++\n    state.statisticLastActivityOn = today.toISOString()\n  }\n\n  if (state.statisticCurrentActivityStreak > state.statisticLongestActivityStreak) {\n    state.statisticLongestActivityStreak = state.statisticCurrentActivityStreak\n  }\n}\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport {\n  randomBool,\n  randomItem,\n} from '../utilities/random.js'\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleReply = (\n  _event,\n  state,\n) => {\n  if (\n    !state.conversationPending\n    && state.conversationInput\n    && state.conversationInput.trim().length > 0\n  ) {\n    state.conversationError = false\n    state.conversationPending = true\n    state.conversationMessages.push({\n      role: 'user',\n      content: state.conversationInput.trim(),\n    })\n    state.conversationInput = ''\n    createMessage(\n      state,\n      state.conversationMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-conversation-follow_up'),\n    ).then(([error, _response, result]) => {\n      state.conversationPending = false\n      if (error) {\n        state.conversationError = error.toString()\n        const message = state.conversationMessages.pop()\n        state.conversationInput = message.content\n        return\n      }\n      if (result.content.trim().endsWith('STOP')) {\n        state.conversationStopped = true\n      }\n      state.conversationMessages.push(result)\n      state.statisticConversationActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleGenerate = (\n  _event,\n  state,\n) => {\n  if (!state.conversationPending) {\n    state.conversationError = false\n    state.conversationMessages = []\n    state.conversationPending = true\n    createMessage(\n      state,\n      [],\n      t(state, 'prompt-context'),\n      t(state, 'prompt-conversation') + (\n        randomBool(10)\n          ? t(state, 'prompt-topic')\n            .replace('{%topic%}', randomItem(\n              state.topicsOfInterest.filter(topic => topic)\n            ))\n          : ''\n      ),\n    ).then(([error, _response, result]) => {\n      state.conversationPending = false\n      if (error) {\n        state.conversationError = error.toString()\n        return\n      }\n      state.conversationMessages.push(result)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.conversationError = false\n  state.conversationMessages = []\n  state.conversationPending = false\n  state.conversationStopped = false\n  // TODO: Should reset the network requests properly.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nconst handleInput = (\n  event,\n  state\n) => {\n  state.conversationInput = event.target.value\n}\n\nexport const conversation = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      t(state, 'conversation-intro'),\n    ]),\n\n    ...c(\n      state.conversationMessages\n      && state.conversationMessages.length > 0,\n      n('div', {\n        class: 'messages',\n      }, state.conversationMessages.map(\n        (message) => n('p', {\n          class: 'message-' + message?.role\n        }, message?.content?.split('\\n')?.flatMap(\n          (content, index, results) =>\n            index === results.length - 1 ? [content] : [content, n('br')]\n        )),\n      )),\n    ),\n\n    ...c(\n      state.conversationError,\n      n('p', state.conversationError),\n    ),\n\n    ...c(\n      state.conversationPending,\n      n('p', {\n        class: 'pending',\n      }),\n      c(\n        state.conversationMessages\n        && state.conversationMessages.length > 0,\n        n('textarea', {\n          class: 'message-user',\n          id: 'input-question',\n          keyup: handleInput,\n        }, state.conversationInput),\n      ),\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.conversationMessages\n        && state.conversationMessages.length > 0\n        && !state.conversationStopped,\n        n('button', {\n          disabled: (\n            state.conversationPending\n            || !state.conversationInput\n            || state.conversationInput.trim().length === 0\n          ),\n          type: 'button',\n          click: handleReply,\n        }, t(state, 'button-reply')),\n        n('button', {\n          disabled: state.conversationPending,\n          type: 'button',\n          click: handleGenerate,\n        }, t(state, 'button-generate')),\n      ),\n\n      ...c(\n        state.conversationPending\n        || (\n          state.conversationMessages\n          && state.conversationMessages.length > 0\n        ),\n        n('button', {\n          click: handleReset,\n          type: 'button',\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button',\n      }, t(state, 'button-go_back')),\n    ])\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleAsk = (\n  _event,\n  state,\n) => {\n  if (\n    !state.clarificationPending\n    && state.clarificationInput\n    && state.clarificationInput.trim().length > 0\n  ) {\n    state.clarificationError = false\n    state.clarificationPending = true\n    state.clarificationMessages.push({\n      role: 'user',\n      content: state.clarificationInput.trim(),\n    })\n    state.clarificationInput = ''\n    createMessage(\n      state,\n      state.clarificationMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-clarification'),\n    ).then(([error, _response, result]) => {\n      state.clarificationPending = false\n      if (error) {\n        state.clarificationError = error.toString()\n        const message = state.clarificationMessages.pop()\n        state.clarificationInput = message.content\n        return\n      }\n      state.clarificationMessages.push(result)\n      state.statisticClarificationActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleInput = (\n  event,\n  state\n) => {\n  state.clarificationInput = event.target.value\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.clarificationError = false\n  state.clarificationMessages = []\n  state.clarificationPending = false\n  // TODO: Should reset the network requests properly.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const clarification = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      n('label', {\n        for: 'input-question',\n      }, t(state, 'clarification-intro')),\n    ]),\n\n    ...c(\n      state.clarificationMessages\n      && state.clarificationMessages.length > 0,\n      n('div', {\n        class: 'messages',\n      }, state.clarificationMessages.map(\n        (message) => n('p', {\n          class: 'message-' + message?.role\n        }, message?.content?.split('\\n')?.flatMap(\n          (content, index, results) =>\n            index === results.length - 1 ? [content] : [content, n('br')]\n        )),\n      )),\n    ),\n\n    ...c(\n      state.clarificationError,\n      n('p', state.clarificationError),\n    ),\n\n    ...c(\n      state.clarificationPending,\n      n('p', {\n        class: 'pending',\n      }),\n      n('textarea', {\n        class: 'message-user',\n        id: 'input-question',\n        placeholder: t(state, 'clarification-placeholder'),\n        keyup: handleInput,\n      }, state.clarificationInput),\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      n('button', {\n        disabled: (\n          state.clarificationPending\n          || !state.clarificationInput\n          || state.clarificationInput.trim().length === 0\n        ),\n        type: 'button',\n        click: handleAsk,\n      }, t(state, 'button-ask')),\n\n      ...c(\n        state.clarificationPending\n        || (\n          state.clarificationMessages\n          && state.clarificationMessages.length > 0\n        ),\n        n('button', {\n          type: 'button',\n          click: handleReset,\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        type: 'button',\n        click: handleBack,\n      }, t(state, 'button-go_back')),\n    ])\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport {\n  randomBool,\n  randomItem,\n} from '../utilities/random.js'\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleInput = (\n  event,\n  state,\n) => {\n  state.comprehensionInput = event.target.value\n}\n\nconst handleAnswer = (\n  _event,\n  state,\n) => {\n  if (\n    !state.comprehensionPending &&\n    state.comprehensionInput &&\n    state.comprehensionInput.trim().length > 0\n  ) {\n    state.comprehensionError = false\n    state.comprehensionPending = true\n    state.comprehensionMessages.push({\n      role: 'user',\n      content: state.comprehensionInput.trim(),\n    })\n    state.comprehensionInput = ''\n    createMessage(\n      state,\n      state.comprehensionMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-comprehension-follow_up'),\n    ).then(([error, _response, result]) => {\n      state.comprehensionPending = false\n      if (error) {\n        state.comprehensionError = error.toString()\n        const message = state.comprehensionMessages.pop()\n        state.comprehensionInput = message.content\n        return\n      }\n      state.comprehensionMessages.push(result)\n      state.statisticComprehensionActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleGenerate = (\n  _event,\n  state,\n) => {\n  if (!state.comprehensionPending) {\n    state.comprehensionError = false\n    state.comprehensionMessages = []\n    state.comprehensionPending = true\n    createMessage(\n      state,\n      [],\n      t(state, 'prompt-context'),\n      t(state, 'prompt-comprehension') + (\n        randomBool(10)\n          ? t(state, 'prompt-topic')\n            .replace('{%topic%}', randomItem(\n              state.topicsOfInterest.filter(topic => topic)\n            ))\n          : ''\n      ),\n    ).then(([error, _response, result]) => {\n      state.comprehensionPending = false\n      if (error) {\n        state.comprehensionError = error.toString()\n        return\n      }\n      state.comprehensionMessages.push(result)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.comprehensionError = false\n  state.comprehensionInput = ''\n  state.comprehensionMessages = []\n  state.comprehensionPending = false\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const comprehension = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      t(state, 'comprehension-intro'),\n    ]),\n\n    ...c(\n      state.comprehensionMessages\n      && state.comprehensionMessages.length > 0,\n      n('div', {\n        class: 'messages',\n      }, state.comprehensionMessages.map(\n        (message) => n('p', {\n          class: 'message-' + message?.role,\n        }, message?.content?.split('\\n')\n          ?.flatMap(\n            (content, index, results) =>\n              index === results.length - 1\n                ? [content]\n                : [content, n('br')]\n          ),\n        ),\n      )),\n    ),\n\n    ...c(\n      state.comprehensionError,\n      n('p', state.comprehensionError),\n    ),\n\n    ...c(\n      state.comprehensionPending,\n      n('p', {\n        class: 'pending',\n      }),\n      c(\n        state.comprehensionMessages\n        && state.comprehensionMessages.length > 0\n        && state.comprehensionMessages.length < 3,\n        n('textarea', {\n          class: 'message-user',\n          id: 'input-question',\n          keyup: handleInput,\n        }, state.comprehensionInput),\n      ),\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.comprehensionMessages\n        && state.comprehensionMessages.length > 0\n        && state.comprehensionMessages.length < 3,\n        n('button', {\n          disabled: (\n            state.comprehensionPending\n            || !state.comprehensionInput\n            || state.comprehensionInput.trim().length === 0\n          ),\n          type: 'button',\n          click: handleAnswer,\n        }, t(state, 'button-answer')),\n        n('button', {\n          disabled: state.comprehensionPending,\n          type: 'button',\n          click: handleGenerate,\n        }, t(state, 'button-generate')),\n      ),\n\n      ...c(\n        state.comprehensionPending\n        || (\n          state.comprehensionMessages\n          && state.comprehensionMessages.length > 0\n        ),\n        n('button', {\n          click: handleReset,\n          type: 'button',\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button',\n      }, t(state, 'button-go_back')),\n    ])\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport {\n  translate as t,\n} from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleInput = (\n  event,\n  state,\n) => {\n  state.readingInput = event.target.value\n}\n\nconst handleGenerate = (\n  _event,\n  state,\n) => {\n  if (!state.readingPending) {\n    state.readingError = false\n    state.readingMessages = []\n    state.readingPending = true\n\n    let instructions = t(state, 'prompt-reading')\n    if (\n      state.readingInput &&\n      state.readingInput.trim().length > 0\n    ) {\n      state.readingMessages.push({\n        role: 'user',\n        content: state.readingInput.trim(),\n      })\n      instructions += ' ' + t(state, 'prompt-reading-topic')\n    }\n\n    createMessage(\n      state,\n      state.readingMessages,\n      t(state, 'prompt-context'),\n      instructions,\n    ).then(([error, _response, result]) => {\n      state.readingPending = false\n      if (error) {\n        state.readingError = error.toString()\n        return\n      }\n      state.readingMessages.push(result)\n      state.statisticReadingActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.readingError = false\n  state.readingInput = ''\n  state.readingMessages = []\n  state.readingPending = false\n  // TODO: Should reset the network requests properly.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const reading = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      n('label', {\n        for: 'input-topic',\n      }, t(state, 'reading-intro')),\n    ]),\n\n    n('div', {\n      class: 'messages',\n    }, [\n      ...c(\n        state.readingMessages\n        && state.readingMessages?.length > 0,\n        state.readingMessages?.map(\n          (message) => n('p', {\n            class: 'message-' + message?.role,\n          }, message?.content?.split('\\n')\n            ?.flatMap(\n              (content, index, results) =>\n                index === results.length - 1\n                  ? [content]\n                  : [content, n('br')]\n            ),\n          )\n        ),\n        n('textarea', {\n          class: 'message-user',\n          disabled: state.readingMessages?.length > 0,\n          id: 'input-topic',\n          input: handleInput,\n          placeholder: t(state, 'reading-placeholder'),\n        }, state.readingInput || ''),\n      ),\n    ]),\n\n    ...c(\n      state.readingError,\n      n('p', state.readingError),\n    ),\n\n    ...c(\n      state.readingPending,\n      n('p', {\n        class: 'pending',\n      }),\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.readingPending\n        || (\n          state.readingMessages\n          && state.readingMessages?.length === 0\n        ),\n        n('button', {\n          click: handleGenerate,\n          disabled: state.readingPending,\n          type: 'button',\n        }, t(state, 'button-generate')),\n      ),\n\n      ...c(\n        state.readingPending\n        || (\n          state.readingMessages\n          && state.readingMessages?.length > 0\n        ),\n        n('button', {\n          type: 'button',\n          click: handleReset,\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button'\n      }, t(state, 'button-go_back'))\n    ])\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport {\n  randomBool,\n  randomItem,\n} from '../utilities/random.js'\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleInput = (\n  event,\n  state,\n) => {\n  state.storyInput = event.target.value\n}\n\nconst handleReply = (\n  _event,\n  state,\n) => {\n  if (\n    !state.storyPending\n    && state.storyInput\n    && state.storyInput.trim().length > 0\n  ) {\n    state.storyError = false\n    state.storyPending = true\n    state.storyMessages.push({\n      role: 'user',\n      content: state.storyInput.trim(),\n    })\n    state.storyInput = ''\n\n    createMessage(\n      state,\n      state.storyMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-story-follow_up'),\n    ).then(([error, _response, result]) => {\n      state.storyPending = false\n      if (error) {\n        state.storyError = error.toString()\n        const message = state.storyMessages.pop()\n        state.storyInput = message.content\n        return\n      }\n      if (result.content.endsWith('STOP')) {\n        state.storyStopped = true\n      }\n      state.storyMessages.push(result)\n      state.statisticStoryActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleGenerate = (\n  _event,\n  state,\n) => {\n  if (!state.storyPending) {\n    state.storyError = false\n    state.storyMessages = []\n    state.storyPending = true\n\n    createMessage(\n      state,\n      [],\n      t(state, 'prompt-context'),\n      t(state, 'prompt-story') + (\n        randomBool(10)\n          ? t(state, 'prompt-topic')\n            .replace('{%topic%}', randomItem(\n              state.topicsOfInterest.filter(topic => topic)\n            ))\n          : ''\n      ),\n    ).then(([error, _response, result]) => {\n      state.storyPending = false\n      if (error) {\n        state.storyError = error.toString()\n        return\n      }\n      state.storyMessages.push(result)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.storyError = false\n  state.storyMessages = []\n  state.storyPending = false\n  state.storyStopped = false\n  // TODO: Should reset the network requests properly.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const story = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      t(state, 'story-intro'),\n    ]),\n\n    ...c(\n      state.storyMessages\n      && state.storyMessages.length > 0,\n      n('div', {\n        class: 'messages',\n      }, state.storyMessages.map(\n        (message) => n('p', {\n          class: 'message-' + message?.role,\n        }, message?.content?.split('\\n')\n          ?.flatMap(\n            (content, index, results) =>\n              index === results.length - 1\n                ? [content]\n                : [content, n('br')]\n          ))\n      ))\n    ),\n\n    ...c(\n      state.storyError,\n      n('p', state.storyError)\n    ),\n\n    ...c(\n      state.storyPending,\n      n('p', {\n        class: 'pending',\n      }),\n      c(\n        state.storyMessages\n        && state.storyMessages.length > 0,\n        n('textarea', {\n          class: 'message-user',\n          id: 'input-question',\n          keyup: handleInput,\n        }, state.storyInput)\n      )\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.storyMessages\n        && state.storyMessages.length > 0\n        && !state.storyStopped,\n        n('button', {\n          disabled: (\n            state.storyPending\n            || !state.storyInput\n            || state.storyInput.trim().length === 0\n          ),\n          type: 'button',\n          click: handleReply,\n        }, t(state, 'button-reply')),\n        n('button', {\n          disabled: state.storyPending,\n          type: 'button',\n          click: handleGenerate,\n        }, t(state, 'button-generate')),\n      ),\n\n      ...c(\n        state.storyPending\n        || (\n          state.storyMessages\n          && state.storyMessages.length > 0\n        ),\n        n('button', {\n          click: handleReset,\n          type: 'button',\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button',\n      }, t(state, 'button-go_back')),\n    ])\n  ]\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { translate as t } from '../data/translations.js'\nimport { SCREENS } from '../data/screens.js'\n\nimport { onActivity } from '../utilities/streak.js'\nimport { setScreen } from '../utilities/screen.js'\n\nconst handleInput = (\n  event,\n  state,\n) => {\n  state.vocabularyInput = event.target.value\n}\n\nconst handleAnswer = (\n  _event,\n  state,\n) => {\n  if (\n    !state.vocabularyPending\n    && state.vocabularyInput\n    && state.vocabularyInput.trim().length > 0\n  ) {\n    state.vocabularyError = false\n    state.vocabularyPending = true\n    state.vocabularyMessages.push({\n      role: 'user',\n      content: state.vocabularyInput.trim(),\n    })\n    state.vocabularyInput = ''\n    createMessage(\n      state,\n      state.vocabularyMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-vocabulary-follow_up'),\n    ).then(([error, _response, result]) => {\n      state.vocabularyPending = false\n      if (error) {\n        state.vocabularyError = error.toString()\n        const message = state.vocabularyMessages.pop()\n        state.vocabularyInput = message.content\n        return\n      }\n      state.vocabularyMessages.push(result)\n      state.statisticVocabularyActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleGenerate = (\n  _event,\n  state,\n) => {\n  if (!state.vocabularyPending) {\n    state.vocabularyError = false\n    state.vocabularyMessages = []\n    state.vocabularyPending = true\n    createMessage(\n      state,\n      [],\n      t(state, 'prompt-context'),\n      t(state, 'prompt-vocabulary'),\n    ).then(([error, _response, result]) => {\n      state.vocabularyPending = false\n      if (error) {\n        state.vocabularyError = error.toString()\n        return\n      }\n      state.vocabularyMessages.push(result)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.vocabularyError = false\n  state.vocabularyMessages = []\n  state.vocabularyPending = false\n  // TODO: Should reset the network requests properly.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const vocabulary = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      t(state, 'vocabulary-intro'),\n    ]),\n\n    ...c(\n      state.vocabularyMessages\n      && state.vocabularyMessages.length > 0,\n      n('div', {\n        class: 'messages'\n      }, state.vocabularyMessages.map((message) =>\n        n('p', {\n          class: 'message-' + message?.role\n        }, message?.content?.split('\\n')\n          ?.flatMap((content, index, results) =>\n            index === results.length - 1\n              ? [content]\n              : [content, n('br')]\n          ),\n        ),\n      )),\n    ),\n\n    ...c(\n      state.vocabularyError,\n      n('p', state.vocabularyError),\n    ),\n\n    ...c(\n      state.vocabularyPending,\n      n('p', {\n        class: 'pending',\n      }),\n      c(\n        state.vocabularyMessages\n        && state.vocabularyMessages.length > 0\n        && state.vocabularyMessages.length < 3,\n        n(\n          'textarea',\n          {\n            class: 'message-user',\n            id: 'input-question',\n            keyup: handleInput,\n          },\n          state.vocabularyInput\n        )\n      )\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.vocabularyMessages\n        && state.vocabularyMessages.length > 0\n        && state.vocabularyMessages.length < 3,\n        n('button', {\n          disabled:\n            state.vocabularyPending\n            || !state.vocabularyInput\n            || state.vocabularyInput.trim().length === 0,\n          type: 'button',\n          click: handleAnswer,\n        }, t(state, 'button-answer')),\n        n('button', {\n          disabled: state.vocabularyPending,\n          type: 'button',\n          click: handleGenerate,\n        }, t(state, 'button-generate'))\n      ),\n\n      ...c(\n        state.vocabularyPending\n        || (\n          state.vocabularyMessages\n          && state.vocabularyMessages.length > 0\n        ),\n        n('button', {\n          click: handleReset,\n          type: 'button',\n        }, t(state, 'button-reset'))\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button',\n      }, t(state, 'button-go_back')),\n    ]),\n  ]\n", "const IDENTIFIER_CHARACTERS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nexport const createIdentifier = (\n  length\n) => {\n  let result = '';\n  const charactersLength = IDENTIFIER_CHARACTERS.length;\n  let counter = 0;\n  while (counter < length) {\n    result += IDENTIFIER_CHARACTERS.charAt(Math.floor(Math.random() * charactersLength));\n    counter += 1;\n  }\n  return result;\n}\n", "const getSelection = () => {\n  const selection = window.getSelection()\n\n  let context = ''\n  if (selection.anchorNode) {\n    if (selection.anchorNode === selection.focusNode) {\n      context = selection.anchorNode.textContent.trim()\n    } else {\n      // Clone selection and set the range to the start of the anchor node and the end of the focus node.\n      const range = selection\n        .getRangeAt(0)\n        .cloneRange()\n      range.setStart(\n        selection.anchorNode,\n        0,\n      )\n      range.setEnd(\n        selection.focusNode,\n        selection.focusNode.length,\n      )\n\n      const fragment = range.cloneContents()\n      context = Array.from(\n        fragment.childNodes,\n      )\n        .map((node) => node.textContent)\n        .join(' ')\n        .trim()\n    }\n  }\n\n  return {\n    context: context,\n    text: selection?.toString().trim() ?? ''\n  }\n}\n\nexport const handleContextMenu = (\n  state,\n) => {\n  document.addEventListener('contextmenu', (\n    event,\n  ) => {\n    event.preventDefault()\n\n    state.contextMenu = {\n      pointerX: event.pageX,\n      pointerY: event.pageY,\n    }\n    state.selection = getSelection()\n\n    // Close the context menu when clicking outside of it.\n    document.addEventListener('click', () => {\n      state.contextMenu = null\n      state.selection = null\n    }, {\n      once: true,\n    })\n  })\n}\n\n", "import { isReady } from '../apis/apis.js'\nimport { SCREENS } from '../data/screens.js'\nimport { setScreen } from './screen.js'\n\nexport const handleStartup = (\n  state,\n) => {\n  const searchParameters = new URLSearchParams(\n    window.location.search,\n  )\n\n  // Don't handle specialised startup unless ready.\n  if (!isReady(state)) {\n    return\n  }\n\n  // Switch to the specified screen.\n  const screen = searchParameters.get('screen')\n  // Don't allow the user to go back to the setup screen.\n  if (screen !== SCREENS.setup) {\n    setScreen(state, screen)\n  }\n}\n", "let appState\nlet messages = []\nconst handleMessage = (\n  state,\n  event,\n) => {\n  switch (event?.data?.type) {\n    case 'cacheUpdate':\n      state.appUpdateAvailable = true\n      break\n  }\n}\n\nif ('serviceWorker' in navigator) {\n  // Register service worker.\n  navigator.serviceWorker.register((\n    process.env.NODE_ENV === 'production'\n      ? './sw.min.js'\n      : './sw.js'\n  ), {\n    scope: './',\n  })\n\n  // Start listening to incoming messages.\n  navigator.serviceWorker.addEventListener('message', (\n    event,\n  ) => {\n    if (appState) {\n      handleMessage(appState, event)\n    } else {\n      messages.push(event)\n    }\n  })\n}\n\nexport const handleUpdates = (\n  state,\n) => {\n  // Handle earlier messages.\n  for (const message of messages) {\n    handleMessage(state, message)\n  }\n  // Store state so new messages can be handled directly.\n  appState = state\n  messages = null\n}\n", "import {\n  conditional as c,\n  node as n,\n} from '@doars/staark'\n\nimport { createMessage } from '../apis/apis.js'\n\nimport { SCREENS } from '../data/screens.js'\nimport { translate as t } from '../data/translations.js'\n\nimport { setScreen } from '../utilities/screen.js'\nimport { onActivity } from '../utilities/streak.js'\n\nconst handleInput = (\n  event,\n  state,\n) => {\n  state.rewriteInput = event.target.value\n}\n\nconst handleRewrite = (\n  _event,\n  state,\n) => {\n  if (!state.rewritePending) {\n    state.rewriteError = false\n    state.rewriteMessages = [{\n      role: 'user',\n      content: state.rewriteInput.trim(),\n    }]\n    state.rewritePending = true\n\n    createMessage(\n      state,\n      state.rewriteMessages,\n      t(state, 'prompt-context'),\n      t(state, 'prompt-rewrite'),\n    ).then(([error, _response, result]) => {\n      state.rewritePending = false\n      if (error) {\n        state.rewriteError = error.toString()\n        return\n      }\n      state.rewriteMessages.push(result)\n      state.statisticRewriteActivity++\n      onActivity(state)\n    })\n  }\n}\n\nconst handleReset = (\n  _event,\n  state,\n) => {\n  state.rewriteError = false\n  state.rewriteInput = ''\n  state.rewriteMessages = []\n  state.rewritePending = false\n  // TODO: Reset network requests if needed.\n}\n\nconst handleBack = (\n  _event,\n  state,\n) => {\n  setScreen(state, SCREENS.overview)\n}\n\nexport const rewrite = (\n  state,\n) => [\n    n('p', [\n      n('b', t(state, 'greeting')),\n      n('br'),\n      n('label', {\n        for: 'input-text',\n      }, t(state, 'rewrite-intro')),\n    ]),\n\n    n('div', {\n      class: 'messages',\n    }, [\n      ...c(\n        state.rewriteMessages\n        && state.rewriteMessages.length > 0,\n        state.rewriteMessages.map((message) =>\n          n('p', {\n            class: 'message-' + message.role,\n          }, message.content.split('\\n')\n            .flatMap((content, index, results) =>\n              index === results.length - 1\n                ? [content]\n                : [content, n('br')]\n            )\n          )\n        ),\n        n('textarea', {\n          class: 'message-user',\n          disabled:\n            state.rewriteMessages\n            && state.rewriteMessages.length > 0,\n          id: 'input-text',\n          input: handleInput,\n          placeholder: t(state, 'rewrite-placeholder'),\n        }, state.rewriteInput),\n      ),\n    ]),\n\n    ...c(\n      state.rewriteError,\n      n('p', state.rewriteError),\n    ),\n\n    ...c(\n      state.rewritePending,\n      n('p', {\n        class: 'pending',\n      }),\n    ),\n\n    n('div', {\n      class: 'row reverse',\n    }, [\n      ...c(\n        state.rewritePending\n        || (\n          state.rewriteMessages\n          && state.rewriteMessages.length === 0\n        ),\n        n('button', {\n          click: handleRewrite,\n          disabled: (\n            state.rewritePending\n            || state.rewriteInput.trim().length === 0\n          ),\n          type: 'button',\n        }, t(state, 'button-rewrite')),\n      ),\n\n      ...c(\n        state.rewritePending\n        || (\n          state.rewriteMessages\n          && state.rewriteMessages.length > 0\n        ),\n        n('button', {\n          type: 'button',\n          click: handleReset,\n        }, t(state, 'button-reset')),\n      ),\n\n      n('button', {\n        click: handleBack,\n        type: 'button',\n      }, t(state, 'button-go_back')),\n    ]),\n  ]\n", "import {\n  mount,\n  match as m,\n  node as n,\n} from '@doars/staark'\n\nimport { APIS } from './apis/apis.js'\nimport {\n  apiSettings as apiSettingsGoogle,\n} from './apis/google.js'\n\nimport {\n  getPreferredLocale,\n  LOCALES,\n  PROFICIENCY_LEVELS,\n  getLanguageFromLocale,\n  setLangAttribute,\n} from './data/locales.js'\nimport { SCREENS } from './data/screens.js'\nimport { STORAGE_KEY } from './data/state.js'\n\nimport { contextMenu } from './screens/sections/context-menu.js'\nimport { popupModal } from './screens/sections/popup-modal.js'\nimport { updateBanner } from './screens/sections/update-banner.js'\nimport { migrate } from './screens/migrate.js'\nimport { options } from './screens/options.js'\nimport { overview } from './screens/overview.js'\nimport { setup } from './screens/setup.js'\n\nimport { conversation } from './screens/conversation.js'\nimport { clarification } from './screens/clarification.js'\nimport { comprehension } from './screens/comprehension.js'\nimport { reading } from './screens/reading.js'\nimport { story } from './screens/story.js'\nimport { vocabulary } from './screens/vocabulary.js'\n\nimport { createIdentifier } from './utilities/identifiers.js'\nimport { handleContextMenu } from './utilities/context-menu.js'\nimport { handleHistory } from './utilities/screen.js'\nimport { handleStartup } from './utilities/manifest.js'\nimport { handleUpdates } from './utilities/sw.js'\nimport { rewrite } from './screens/rewrite.js'\n\nconst initialize = () => {\n  const preferredLocale = getPreferredLocale()\n\n  const [_update, _unmount, state] = mount(\n    document.body.appendChild(\n      document.createElement('div'),\n    ),\n    (state) => {\n      window.localStorage.setItem(\n        STORAGE_KEY,\n        JSON.stringify(state),\n      )\n\n      return n('div', {\n        class: 'screen',\n      }, [\n        ...updateBanner(state),\n        ...m(state.screen, {\n          [SCREENS.clarification]: () => clarification(state),\n          [SCREENS.comprehension]: () => comprehension(state),\n          [SCREENS.conversation]: () => conversation(state),\n          [SCREENS.reading]: () => reading(state),\n          [SCREENS.rewrite]: () => rewrite(state),\n          [SCREENS.story]: () => story(state),\n          [SCREENS.vocabulary]: () => vocabulary(state),\n\n          [SCREENS.overview]: () => overview(state),\n          [SCREENS.options]: () => options(state),\n          [SCREENS.migrate]: () => migrate(state),\n        }, () => setup(state)),\n        ...popupModal(state),\n        ...contextMenu(state),\n      ])\n    },\n    Object.assign({\n      screen: SCREENS.setup,\n      userIdentifier: createIdentifier(),\n\n      appUpdateAvailable: false,\n      contextMenu: null,\n      selection: null,\n      popupModal: null,\n\n      sourceLocale: preferredLocale,\n      sourceLanguage: getLanguageFromLocale(preferredLocale),\n      targetLocale: LOCALES.eng,\n      targetLanguage: getLanguageFromLocale(LOCALES.eng),\n      proficiencyLevel: PROFICIENCY_LEVELS.a1,\n      topicsOfInterest: [],\n\n      apiProvider: APIS.google.code,\n      apiModel: apiSettingsGoogle.preferredModel,\n      apiCredentials: null,\n      apiCredentialsError: false,\n      apiCredentialsPending: false,\n      apiCredentialsTested: false,\n\n      migrateImportError: false,\n      migrateReset: false,\n\n      statisticClarificationActivity: 0,\n      statisticComprehensionActivity: 0,\n      statisticConversationActivity: 0,\n      statisticReadingActivity: 0,\n      statisticRewriteActivity: 0,\n      statisticStoryActivity: 0,\n      statisticVocabularyActivity: 0,\n      statisticLastActivityOn: null,\n      statisticCurrentActivityStreak: 0,\n      statisticLongestActivityStreak: 0,\n\n      clarificationInput: '',\n      clarificationError: false,\n      clarificationPending: false,\n      clarificationMessages: [],\n\n      comprehensionInput: '',\n      comprehensionReviewed: false,\n      comprehensionError: false,\n      comprehensionPending: false,\n      comprehensionMessages: [],\n\n      conversationInput: '',\n      conversationStopped: false,\n      conversationError: false,\n      conversationPending: false,\n      conversationMessages: [],\n\n      readingInput: '',\n      readingError: false,\n      readingPending: false,\n      readingMessages: [],\n\n      rewriteInput: '',\n      rewriteError: false,\n      rewritePending: false,\n      rewriteMessages: [],\n\n      storyInput: '',\n      storyReviewed: false,\n      storyError: false,\n      storyPending: false,\n      storyMessages: [],\n\n      vocabularyInput: '',\n      vocabularyReviewed: false,\n      vocabularyError: false,\n      vocabularyPending: false,\n      vocabularyMessages: [],\n    }, (\n      window.localStorage.getItem(STORAGE_KEY)\n        ? JSON.parse(\n          window.localStorage.getItem(STORAGE_KEY)\n        )\n        : {}\n    ), {\n      // Ensure files updated is always reset after a full page refresh.\n      appUpdateAvailable: false,\n      apiCredentialsPending: false,\n\n      clarificationPending: false,\n      comprehensionPending: false,\n      conversationPending: false,\n      storyPending: false,\n      vocabularyPending: false,\n    })\n  )\n\n  setLangAttribute(state)\n\n  handleContextMenu(state)\n  handleHistory(state)\n  handleStartup(state)\n  handleUpdates(state)\n}\n\n// Check if dom content loaded event has already fired.\nif (document.readyState === 'loading') {\n  document.addEventListener('DOMContentLoaded', initialize)\n} else {\n  initialize()\n}\n"],
  "mappings": "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",
  "names": ["match", "cloneRecursive", "match", "cloneRecursive", "options", "response", "result", "error", "cloneRecursive", "messages", "cloneRecursive", "apiSettings", "_createMessage", "createMessage", "messages", "cloneRecursive", "_getModels", "getModels", "apiSettings", "_createMessage", "createMessage", "messages", "cloneRecursive", "_getModels", "getModels", "apiSettings", "_createMessage", "createMessage", "messages", "cloneRecursive", "_getModels", "getModels", "apiSettings", "createMessage", "messages", "getModels", "match", "key", "createMessage", "handleBack", "handleBack", "getModels", "handleSourceLanguage", "handleTargetLanguage", "handleProficiencyLevel", "handleNewTopic", "handleApiProvider", "handleApiCredentials", "handleApiCredentialsTest", "getModels", "handleApiModel", "createMessage", "handleReset", "handleBack", "createMessage", "handleInput", "handleReset", "handleBack", "handleInput", "createMessage", "handleGenerate", "handleReset", "handleBack", "handleInput", "handleGenerate", "createMessage", "handleReset", "handleBack", "handleInput", "handleReply", "createMessage", "handleGenerate", "handleReset", "handleBack", "handleInput", "handleAnswer", "createMessage", "handleGenerate", "handleReset", "handleBack", "node", "handleInput", "handleRewrite", "createMessage", "handleReset", "handleBack", "state", "apiSettings"]
}
